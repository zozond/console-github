{"version":3,"sources":["pages/indices/collection/ControlBox.js","pages/indices/collection/Source.js"],"names":["Box","styled","MuiBox","spacing","positions","Button","MuiButton","Grid","MuiGrid","timer","connect","store","authUser","dsearchReducers","collectionReducers","dispatch","collection","job","React","useState","actionOpen","setActionOpen","actionAnchorRef","useRef","connected","setConnected","processUI","setProcessUI","errorSnackbar","setErrorSnackbar","errorMessage","setErrorMessage","isRunningJob","useEffect","setCollection","clearTimeout","err","setTimeout","fetchJob","setCollectionJob","then","catch","error","handleClose","event","current","contains","target","handleAction","action","console","log","editCollectionAction","response","container","my","ml","item","xs","mt","style","alignSelf","CircularProgress","m","color","fontWeight","height","options","Fragment","Switch","onChange","checked","editCollectionScheduleAction","disabled","role","index","display","ButtonGroup","variant","ref","width","minWidth","maxWidth","size","onClick","prevOpen","Popper","open","anchorEl","undefined","transition","disablePortal","TransitionProps","placement","Grow","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","id","map","option","MenuItem","key","handleMenuItemClick","Alert","iconMapping","success","fontSize","severity","info","border","LinearProgress","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","message","Typography","MuiTypography","Card","MuiCard","useStyles","makeStyles","theme","formControl","root","flexGrow","edit","typography","padding","TEMPLATE_LIST","TEMPLATE","NO_SELECTED","jdbcReducers","clusterReducers","JdbcList","classes","editModal","setEditModal","mode","setMode","setAnchorEl","setOpen","setPlacement","templateValue","setTemplateValue","launcherYaml","setLauncherYaml","scheme","setScheme","jdbcId","setJdbcId","isExtIndexer","setExtIndexer","esScheme","setEsScheme","invalid","setInvalid","aceEditor","newSourceName","value","newHost","newPort","newCron","newEsHost","newEsPort","newEsUser","newEsPassword","toggleEditModal","currentTarget","editor","setValue","clearSelection","newPlacement","jdbcHitList","sourceAsMap","name","useJdbcList","filter","jdbcObj","CardContent","align","mx","Table","TableBody","TableRow","TableCell","component","Link","cursor","length","sourceName","host","port","esHost","esPort","cron","esUser","esPassword","invalidCheck","trim","isValidCron","Object","keys","editCollectionSourceAction","extIndexer","launcher","yaml","getValue","alert","p","TextField","inputRef","fullWidth","alignItems","justifyContent","marginBottom","FormControl","InputLabel","Select","labelId","i","tabSize","placeholder","setOptions","useWorker","onMouseOver","prev","Boolean","Fade","timeout","className","e","type","Dialog","DialogTitle","DialogContent","DialogActions"],"mappings":"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","file":"static/js/73.2e2c86f2.chunk.js","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport {\r\n    Box as MuiBox,\r\n    Button as MuiButton,\r\n    CircularProgress,\r\n    Grid as MuiGrid,\r\n    Grow,\r\n    LinearProgress,\r\n    MenuItem,\r\n    MenuList,\r\n    Paper,\r\n    Popper,\r\n    Snackbar,\r\n    Switch,\r\n} from \"@material-ui/core\";\r\nimport {positions, spacing} from \"@material-ui/system\";\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport {\r\n    editCollectionAction,\r\n    editCollectionScheduleAction,\r\n    setCollection,\r\n    setCollectionJob\r\n} from \"../../../redux/actions/collectionActions\";\r\nimport {connect} from \"react-redux\";\r\nimport PlayCircleOutlineIcon from '@material-ui/icons/PlayCircleOutline';\r\nimport ScheduleIcon from '@material-ui/icons/Schedule';\r\n\r\nconst Box = styled(MuiBox)(spacing, positions);\r\nconst Button = styled(MuiButton)(spacing, positions);\r\nconst Grid = styled(MuiGrid)(spacing, positions);\r\n\r\n// const useStyles = makeStyles((theme) => ({\r\n//     formControl: {\r\n//         minWidth: 250,\r\n//     },\r\n//     root: {\r\n//         flexGrow: 1,\r\n//         width: '100%',\r\n//     },\r\n//     edit: {\r\n//         width: '100%'\r\n//     },\r\n//     typography: {\r\n//         padding: theme.spacing(2),\r\n//     },\r\n// }));\r\n\r\n// let testScheduleFlag = true\r\nlet timer = null\r\n\r\n\r\nlet pollingDelay = 2000\r\nfunction ControlBox({dispatch, authUser, collection, job}) {\r\n    const [actionOpen, setActionOpen] = React.useState(false);\r\n    const actionAnchorRef = React.useRef(null);\r\n    const [connected, setConnected] = useState(false)\r\n    const [processUI, setProcessUI] = useState(false)\r\n    const [errorSnackbar, setErrorSnackbar] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState(\"\")\r\n\r\n    // job이 있을 경우 데이터가 생김..\r\n    const isRunningJob = job['status'] ? true : false\r\n\r\n    // useEffect(() => {\r\n    //     dispatch(setCollection(collection['id']))\r\n    // }, [])\r\n\r\n    useEffect(() => {\r\n        dispatch(setCollection(collection['id']))\r\n        \r\n        const fetchJob = () => {\r\n            dispatch(setCollectionJob(collection['id']))\r\n                .then(job => {\r\n                    setConnected(true); \r\n                    if (timer != null) {\r\n                        try {\r\n                            clearTimeout(timer)\r\n                            timer = null\r\n                        } catch(err) {}\r\n                    }\r\n                    timer = setTimeout(fetchJob, pollingDelay)\r\n                })\r\n                .catch(error => {\r\n                    setConnected(false); \r\n                    if (timer != null) {\r\n                        try {\r\n                            clearTimeout(timer)\r\n                            timer = null\r\n                        } catch(err) {}\r\n                    }\r\n                    timer = setTimeout(fetchJob, pollingDelay)\r\n                })\r\n        }\r\n        if (timer != null) {\r\n            try {\r\n                clearTimeout(timer)\r\n                timer = null\r\n            } catch(err) {}\r\n        }\r\n\r\n        timer = setTimeout(() => fetchJob(), 500);\r\n        return () => {\r\n            try {\r\n                clearTimeout(timer)\r\n            } catch(error) {\r\n                // ignore..\r\n            }\r\n        }\r\n    }, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    const handleMenuItemClick = (event, option, index) => {\r\n        if ('연속실행' === option) {\r\n            handleAction('all')\r\n        } else if ('색인실행' === option) {\r\n            handleAction('indexing')\r\n        } else if ('전파실행' === option) {\r\n            handleAction('propagate')\r\n        } else if ('교체실행' === option) {\r\n            handleAction('expose')\r\n        }\r\n        setActionOpen(false);\r\n    };\r\n    const handleToggle = () => {\r\n        setActionOpen((prevOpen) => !prevOpen);\r\n    };\r\n    const handleClose = (event) => {\r\n        if (actionAnchorRef.current && actionAnchorRef.current.contains(event.target)) {\r\n            return;\r\n        }\r\n        setActionOpen(false);\r\n    };\r\n\r\n    function handleEditSchedule(event) {\r\n        setProcessUI(true)\r\n        collection['scheduled'] = event.target.checked;\r\n        dispatch(editCollectionScheduleAction(collection['id'], collection))\r\n        // dispatch(editCollectionScheduleAction(collection['id'], event.target.checked))\r\n            .then(response => {\r\n                dispatch(setCollection(collection['id']))\r\n                setTimeout(() => {\r\n                    setProcessUI(false)\r\n                }, 2000)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                setErrorMessage(\"\" + error)\r\n                setErrorSnackbar(true)\r\n                dispatch(setCollection(collection['id']))\r\n                setTimeout(() => {\r\n                    setProcessUI(false)\r\n                }, 2000)\r\n            })\r\n    }\r\n    function handleAction(action) {\r\n        setProcessUI(true)\r\n        // actions: all, indexing, propagate, expose, stop_propagation, stop_indexing\r\n        console.log(collection);\r\n        dispatch(editCollectionAction(collection['id'], action))\r\n            .then(response => {\r\n                dispatch(setCollection(collection['id']))\r\n                setTimeout(() => {\r\n                    setProcessUI(false)\r\n                }, 4000)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                setErrorMessage(\"\" + error)\r\n                setErrorSnackbar(true)\r\n                dispatch(setCollection(collection['id']))\r\n                setTimeout(() => {\r\n                    setProcessUI(false)\r\n                }, 4000)\r\n            })\r\n    }\r\n\r\n    function handleErrorSnackbarClose() {\r\n        setErrorSnackbar(false)\r\n    }\r\n\r\n    if (connected === false) {\r\n        return (\r\n            <Grid container my={0} ml={4}>\r\n                <Grid item xs={9} mt={2} style={{alignSelf: \"center\"}}>\r\n                    <Box>\r\n                        연결 중...\r\n                    </Box>\r\n                    <Box>\r\n                        <CircularProgress m={2} color=\"secondary\" />\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        )\r\n    }\r\n\r\n    if (processUI) {\r\n        return (\r\n            <Grid container my={0} ml={4}>\r\n                <Grid item xs={3} >\r\n                    <Grid container my={3}>\r\n                        <Grid item xs={3} mt={2}>\r\n                            <Box style={{fontWeight: \"bold\"}}>스케쥴</Box>\r\n                        </Grid>\r\n                        <Grid item xs={9}>\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                    <Grid container my={3}>\r\n                        <Grid item xs={3} mt={5} style={{height: '37px'}}>\r\n                            <b>상태</b>\r\n                        </Grid>\r\n                        <Grid item xs={9}>\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                </Grid>\r\n                <Grid item xs={9} mt={2} style={{alignSelf: \"center\"}}>\r\n                    <Box>\r\n                        <CircularProgress m={2} color=\"secondary\" />\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        )\r\n    }\r\n\r\n    let options = ['연속실행', '색인실행', '전파실행', '교체실행'];\r\n    // if (typeof collection['ignoreRoleYn'] === \"string\" && collection['ignoreRoleYn'] === \"Y\") {\r\n    //     options = ['연속실행', '색인실행', '교체실행'];\r\n    // }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Grid container my={3} ml={4}>\r\n                <Grid item xs={3} mt={2}>\r\n                    <Box style={{fontWeight: \"bold\"}}>스케쥴</Box>\r\n                </Grid>\r\n                <Grid item xs={9}>\r\n                    <Switch onChange={handleEditSchedule}\r\n                            checked={collection['scheduled']}\r\n                            disabled={!authUser.role.index}\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n\r\n            <Grid container my={3} ml={4}>\r\n                <Grid item xs={3} mt={2} style={{height: '40px'}}>\r\n                    <b>상태</b>\r\n                </Grid>\r\n                <Grid item xs={9}>\r\n                    {/* 컨트롤 가능한 상태 */}\r\n                    <Box style={{display: isRunningJob === false && collection['scheduled'] === false ? \"block\" : \"none\"}}>\r\n                        <ButtonGroup variant=\"contained\" color=\"primary\" ref={actionAnchorRef}>\r\n                            <Button disabled={true}\r\n                                    style={{width: '100%', minWidth: \"150px\", maxWidth: \"300px\", color: \"black\"}}\r\n                            >\r\n                                수동 실행\r\n                            </Button>\r\n                            {authUser.role.index ?\r\n                                <Button\r\n                                    color=\"primary\"\r\n                                    size=\"small\"\r\n                                    onClick={handleToggle}\r\n                                    disabled={!authUser.role.index}\r\n                                >\r\n                                    <ArrowDropDownIcon/>\r\n                                </Button>\r\n                                :\r\n                                <></>\r\n                            }\r\n                        </ButtonGroup>\r\n                        <Popper open={actionOpen} anchorEl={actionAnchorRef.current} role={undefined}\r\n                                transition disablePortal>\r\n                            {({TransitionProps, placement}) => (\r\n                                <Grow\r\n                                    {...TransitionProps}\r\n                                    style={{\r\n                                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\r\n                                    }}\r\n                                >\r\n                                    <Paper>\r\n                                        <ClickAwayListener onClickAway={handleClose}>\r\n                                            <MenuList id=\"split-button-menu\">\r\n                                                {options.map((option, index) => (\r\n                                                    <MenuItem\r\n                                                        key={option}\r\n                                                        onClick={(event) => handleMenuItemClick(event, option, index)}\r\n                                                    >\r\n                                                        {option}\r\n                                                    </MenuItem>\r\n                                                ))}\r\n                                            </MenuList>\r\n                                        </ClickAwayListener>\r\n                                    </Paper>\r\n                                </Grow>\r\n                            )}\r\n                        </Popper>\r\n                    </Box>\r\n                    <Box style={{\r\n                        display: isRunningJob === false && collection['scheduled'] === true ? \"block\" : \"none\",\r\n                        width: '100%', minWidth: \"150px\", maxWidth: \"400px\", color: \"black\" }}\r\n                    >\r\n                        <Alert iconMapping={{ success: <ScheduleIcon fontSize=\"inherit\" /> }}\r\n                               severity=\"success\"\r\n                               style={{display: isRunningJob ? 'none' : 'flex'}}\r\n                        >스케쥴 대기중</Alert>\r\n                    </Box>\r\n\r\n                    <Box style={{\r\n                        display: (isRunningJob === true && collection['scheduled'] === false) || (isRunningJob === true && collection['scheduled'] === true) ? \"block\" : \"none\",\r\n                        width: '100%', minWidth: \"150px\", maxWidth: \"400px\", color: \"black\" }}\r\n                    >\r\n                        <Box style={{display: job['currentStep'] === 'FULL_INDEX' || job['currentStep'] === 'DYNAMIC_INDEX' ? 'block' : 'none' }}>\r\n                            <Alert iconMapping={{ info: <PlayCircleOutlineIcon fontSize=\"inherit\" style={{alignSelf: \"center\"}}/> }}\r\n                                   severity=\"info\"\r\n                                   action={<Button color=\"inherit\" style={{border: \"1px solid silver\"}} size=\"small\" onClick={() => handleAction('stop_indexing')}> 정지 </Button> }\r\n                            >\r\n                                <LinearProgress/>\r\n                                <Box mt={2}>\r\n                                    색인을 진행하고 있습니다.\r\n                                </Box>\r\n                            </Alert>\r\n                        </Box>\r\n\r\n                        <Box style={{display: job['currentStep'] === 'PROPAGATE' ? 'block' : 'none' }}>\r\n                            <Alert iconMapping={{ info: <PlayCircleOutlineIcon fontSize=\"inherit\" style={{alignSelf: \"center\"}}/> }}\r\n                                   severity=\"info\"\r\n                                   action={<Button color=\"inherit\" style={{border: \"1px solid silver\"}} size=\"small\" onClick={() => handleAction('stop_propagation')}> 취소 </Button> }\r\n                            >\r\n                                <LinearProgress />\r\n                                <Box mt={2}>\r\n                                    전파를 진행하고 있습니다.\r\n                                </Box>\r\n                            </Alert>\r\n                        </Box>\r\n\r\n                        <Box style={{display: job['currentStep'] === 'EXPOSE' ? 'block' : 'none' }}>\r\n                            <Alert iconMapping={{ info: <PlayCircleOutlineIcon fontSize=\"inherit\" /> }}\r\n                                   severity=\"info\"\r\n                            >\r\n                                <LinearProgress />\r\n                                교체를 진행하고 있습니다.\r\n                            </Alert>\r\n                        </Box>\r\n\r\n                    </Box>\r\n\r\n                </Grid>\r\n            </Grid>\r\n\r\n            <Snackbar\r\n                anchorOrigin={{ vertical: 'top', horizontal: 'right'}}\r\n                autoHideDuration={6000}\r\n                open={errorSnackbar}\r\n                onClose={handleErrorSnackbarClose}\r\n                severity=\"error\"\r\n                message={\"요청이 실패되었습니다. \" + errorMessage}\r\n                key={\"errorSnackbar\"}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(store => ({ authUser: store.dsearchReducers.authUser, ...store.collectionReducers }))(ControlBox);\r\n","import React, {useEffect, useRef, useState} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n    Box as MuiBox,\r\n    Button as MuiButton,\r\n    Card as MuiCard,\r\n    CardContent,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Fade,\r\n    FormControl,\r\n    Grid as MuiGrid,\r\n    InputLabel,\r\n    Link,\r\n    MenuItem,\r\n    Paper,\r\n    Popper,\r\n    Select,\r\n    Switch,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableRow,\r\n    TextField,\r\n    Typography as MuiTypography,\r\n} from \"@material-ui/core\";\r\n\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {positions, spacing} from \"@material-ui/system\";\r\nimport {connect} from \"react-redux\";\r\nimport {editCollectionSourceAction, setCollection} from \"../../../redux/actions/collectionActions\";\r\nimport {isValidCron} from 'cron-validator'\r\nimport ControlBox from \"./ControlBox\";\r\nimport AceEditor from \"react-ace\";\r\nimport \"ace-builds/src-noconflict/mode-yaml\";\r\nimport \"ace-builds/src-noconflict/theme-kuroir\";\r\n\r\nconst Typography = styled(MuiTypography)(spacing, positions);\r\nconst Box = styled(MuiBox)(spacing, positions);\r\nconst Card = styled(MuiCard)(spacing, positions);\r\nconst Button = styled(MuiButton)(spacing, positions);\r\nconst Grid = styled(MuiGrid)(spacing, positions);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formControl: {\r\n        minWidth: 250,\r\n    },\r\n    root: {\r\n        flexGrow: 1,\r\n        width: '100%',\r\n    },\r\n    edit: {\r\n        width: '100%'\r\n    },\r\n    typography: {\r\n        padding: theme.spacing(2),\r\n    },\r\n}));\r\n\r\nconst TEMPLATE_LIST = [\"ndjson\", \"csv\", \"file\", \"procedure\", \"database\"]\r\nconst TEMPLATE = {\r\n    \"ndjson\" : \r\n`type: ndjson\r\npath: /data/source/search-prod.ndjson\r\nencoding: utf-8\r\nbulkSize: 10000\r\nreset: true\r\nthreadSize: 1`,\r\n\r\n    \"csv\" : \r\n`type: csv\r\npath: /data/source/search-prod.csv\r\nencoding: utf-8\r\nbulkSize: 10000\r\nreset: true\r\nthreadSize: 1`,\r\n\r\n\"file\" : \r\n`type: file\r\npath: /data/source/prodExt_dump\r\nencoding: utf-8\r\nbulkSize: 10000\r\nreset: true\r\nthreadSize: 1\r\nheaderText:\"name,color,price\"\r\ndelimiter: \"^\"`,\r\n\r\n    \"procedure\": \r\n`type: procedure\r\nbulkSize: 1000\r\ndriverClassName: \"Altibase.jdbc.driver.AltibaseDriver\"\r\nfilterClass: \"com.danawa.fastcatx.indexer.filter.DanawaProductFilter\"\r\nurl: \"jdbc:Altibase://localhost:20200/DANAWA_ALTI\"\r\nuser: \"root\"\r\npassword: \"qwerty123456\"\r\nprocedureName: \"procedureName1\"\r\ndumpFormat: \"konan\"\r\ngroupSeq: 1\r\nbwlimit: \"10240\"\r\npath: \"/data/product/VM\"\r\nrsyncIp: \"remote server IP\"\r\nrsyncPath: \"search_data_alti\"\r\nencoding: CP949\r\nprocedureSkip: true\r\nrsyncSkip: true\r\nthreadSize: 1\r\n`,\r\n\r\n    \"database\": \r\n`bulkSize: 10000\r\nfetchSize: 10000\r\ntype: jdbc\r\npipeLine: \"pipeline\"\r\nthreadSize: 1\r\ndataSQL : \"SELECT * FROM myTable\"`\r\n};\r\nconst NO_SELECTED = 'NO_SELECTED';\r\nconst DEFAULT_CRON = '0 0 * * *'\r\n\r\nfunction Source({dispatch, authUser, collection, JdbcList}) {\r\n    const classes = useStyles();\r\n    const [editModal, setEditModal] = useState(null)\r\n    const [mode, setMode] = useState(\"VIEW\")\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const [open, setOpen] = React.useState(null);\r\n    const [placement, setPlacement] = React.useState();\r\n\r\n    const [templateValue, setTemplateValue] = useState(TEMPLATE_LIST[0]);\r\n\r\n    // const [sourceName, setSourceName] = useState(\"\")\r\n    const [launcherYaml, setLauncherYaml] = useState(\"\")\r\n    const [scheme, setScheme] = useState(\"http\")\r\n    // const [host, setHost] = useState(\"\")\r\n    // const [port, setPort] = useState(\"\")\r\n    const [jdbcId, setJdbcId] = useState(NO_SELECTED)\r\n    // const [cron, setCron] = useState(\"\")\r\n\r\n    const [isExtIndexer, setExtIndexer] = useState(false);\r\n    const [esScheme, setEsScheme] = useState(\"http\");\r\n    // const [esHost, setEsHost] = useState(\"\");\r\n    // const [esPort, setEsPort] = useState(\"\");\r\n    // const [esUser, setEsUser] = useState(\"\");\r\n    // const [esPassword, setEsPassword] = useState(\"\");\r\n    const [invalid, setInvalid] = useState({})\r\n\r\n    const aceEditor = useRef(null)\r\n    \r\n    // 수정 \r\n    const newSourceName =  useRef({value : \"\"})\r\n    const newHost = useRef({value : \"\"})\r\n    const newPort = useRef({value : \"\"})\r\n    const newCron = useRef({value : \"\"})\r\n\r\n    const newEsHost = useRef({value : \"\"})\r\n    const newEsPort = useRef({value : \"\"})\r\n    const newEsUser = useRef({value : \"\"})\r\n    const newEsPassword = useRef({value : \"\"})\r\n\r\n    useEffect(() => {\r\n        setInvalid({})\r\n        if (collection['sourceName'] === undefined || collection['sourceName'] === null || collection['sourceName'] === \"\") {\r\n            /* FORCE_EDIT(생성하고 아무런 데이터가 없을 때) 모드일때만 */\r\n            setMode(\"FORCE_EDIT\");\r\n            // aceEditor.current.editor.setValue(DEFAULT_YAML)\r\n            aceEditor.current.editor.setValue(TEMPLATE[TEMPLATE_LIST[0]]);\r\n        } else {\r\n            newSourceName.current.value = collection['sourceName']\r\n            // setSourceName(collection['sourceName']);\r\n            setScheme((collection['launcher']||{})['scheme']||\"\");\r\n            newHost.current.value = (collection['launcher']||{})['host']||\"\"\r\n            newPort.current.value = (collection['launcher']||{})['port']||\"\"\r\n            // setHost((collection['launcher']||{})['host']||\"\");\r\n            // setPort((collection['launcher']||{})['port']||\"\");\r\n\r\n            setExtIndexer(collection['extIndexer'])\r\n            setEsScheme(collection['esScheme'])\r\n            newEsHost.current.value = collection['esHost']\r\n            newEsPort.current.value = collection['esPort']\r\n            newEsUser.current.value = collection['esUser']\r\n            newEsPassword.current.value = collection['esPassword']\r\n            // setEsHost(collection['esHost'])\r\n            // setEsPort(collection['esPort'])\r\n            // setEsUser(collection['esUser'])\r\n            // setEsPassword(collection['esPassword'])\r\n\r\n            // setJdbcId(collection['jdbcId']);\r\n            setJdbcId(collection['jdbcId'] === '' ? NO_SELECTED : collection['jdbcId'])\r\n            newCron.current.value = collection['cron']\r\n            // setCron(collection['cron']);\r\n            setLauncherYaml((collection['launcher']||{})['yaml']||\"\");\r\n            aceEditor.current.editor.setValue((collection['launcher']||{})['yaml']||\"\")\r\n            aceEditor.current.editor.clearSelection()\r\n        }\r\n    }, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    useEffect(() => {\r\n        try {\r\n            if (mode === \"EDIT\") {\r\n                newSourceName.current.value = collection['sourceName']\r\n                newHost.current.value = (collection['launcher']||{})['host']||\"\"\r\n                newPort.current.value = (collection['launcher']||{})['port']||\"\"\r\n                newEsHost.current.value = collection['esHost']\r\n                newEsPort.current.value = collection['esPort']\r\n                newEsUser.current.value = collection['esUser']\r\n                newEsPassword.current.value = collection['esPassword']\r\n                newCron.current.value = collection['cron']\r\n\r\n                // setSourceName(collection['sourceName']);\r\n                setScheme((collection['launcher']||{})['scheme']||\"\");\r\n                // setHost((collection['launcher']||{})['host']||\"\");\r\n                // setPort((collection['launcher']||{})['port']||\"\");\r\n\r\n                setExtIndexer(collection['extIndexer'])\r\n                setEsScheme(collection['esScheme'])\r\n                // setEsHost(collection['esHost'])\r\n                // setEsPort(collection['esPort'])\r\n                // setEsUser(collection['esUser'])\r\n                // setEsPassword(collection['esPassword'])\r\n\r\n                // setJdbcId(collection['jdbcId']);\r\n                setJdbcId(collection['jdbcId'] === '' ? NO_SELECTED : collection['jdbcId'])\r\n                // setCron(collection['cron']);\r\n                setLauncherYaml((collection['launcher']||{})['yaml']||\"\");\r\n                aceEditor.current.editor.setValue((collection['launcher']||{})['yaml']||\"\")\r\n                aceEditor.current.editor.clearSelection()\r\n            }\r\n        } catch (error) {\r\n            console.log('change ace editor')\r\n        }\r\n    }, [mode]) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\r\n    function toggleEditModal(event) {\r\n        setEditModal(editModal === null ? event.currentTarget : null)\r\n    }\r\n\r\n    const handleClick = (newPlacement) => (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n        setOpen((prev) => placement !== newPlacement || !prev);\r\n        setPlacement(newPlacement);\r\n    }\r\n\r\n    function handleSaveProcess() {\r\n        let sourceName = newSourceName.current.value\r\n        let host = newHost.current.value\r\n        let port = newPort.current.value\r\n        let esHost = newEsHost.current.value\r\n        let esPort = newEsPort.current.value\r\n        let cron = newCron.current.value \r\n        let esUser = newEsUser.current.value\r\n        let esPassword = newEsPassword.current.value\r\n\r\n        setInvalid({})\r\n        let invalidCheck = {}\r\n        if (sourceName.trim() === \"\") {\r\n            invalidCheck['sourceName'] = true\r\n        }\r\n        if(cron.length === 0){\r\n            newCron.current.value = DEFAULT_CRON\r\n            // setCron(DEFAULT_CRON)\r\n        }else if (!isValidCron(cron)) {\r\n            invalidCheck['cron'] = true\r\n        }\r\n\r\n        if (isExtIndexer) {\r\n            // || !/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/gi.test(host)\r\n            if (host.trim() === \"\") {\r\n                invalidCheck['host'] = true\r\n            }\r\n            if (port === \"\") {\r\n                invalidCheck['port'] = true\r\n            }\r\n            // || !/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/gi.test(host)\r\n            if (esHost.trim() === \"\") {\r\n                invalidCheck['esHost'] = true\r\n            }\r\n            if (esPort === \"\") {\r\n                invalidCheck['esPort'] = true\r\n            }\r\n        }\r\n\r\n        if (Object.keys(invalidCheck).length > 0) {\r\n            setInvalid(invalidCheck)\r\n            return false\r\n        }\r\n        \r\n        dispatch(editCollectionSourceAction(collection['id'], {\r\n            sourceName,\r\n            cron: (cron.length === 0 ? DEFAULT_CRON : cron),\r\n            jdbcId: (jdbcId === NO_SELECTED ? '' : jdbcId),\r\n            extIndexer: isExtIndexer,\r\n            esScheme, esHost: esHost.trim(), esPort, esUser: esUser.trim(), esPassword: esPassword.trim(),\r\n            launcher: {\r\n                yaml: aceEditor.current.editor.getValue() || '',\r\n                scheme: isExtIndexer ? scheme : \"http\", host: isExtIndexer ? host.trim() : \"\", port: isExtIndexer ? port : \"\",\r\n            }\r\n        })).then(response => {\r\n            dispatch(setCollection(collection['id']))\r\n            setMode(\"VIEW\")\r\n        }).catch(error => {\r\n            console.log(error)\r\n            alert(error)\r\n        })\r\n    }\r\n\r\n    const handleTemplateValue = (event) => {\r\n        setTemplateValue(event.target.value);\r\n        aceEditor.current.editor.setValue(TEMPLATE[event.target.value]);\r\n    }\r\n\r\n    let jdbcHitList = [\r\n        { id: NO_SELECTED, sourceAsMap: {name: '선택안함'} },\r\n        ...((JdbcList['hits']||{})['hits']||[])\r\n    ]\r\n\r\n    let useJdbcList = jdbcHitList.filter(jdbcObj => (collection['jdbcId'] === '' ? NO_SELECTED : collection['jdbcId']) === jdbcObj['id']).map(jdbcObj => jdbcObj['sourceAsMap']['name'])\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <br/>\r\n\r\n            <Card>\r\n                <CardContent>\r\n                    <Box style={{display: mode === \"VIEW\" ? \"block\" : \"none\"}}>\r\n                        <Grid container>\r\n                            <Grid item xs={10}>\r\n\r\n                                <ControlBox />\r\n\r\n                            </Grid>\r\n                            <Grid item xs={2} align={\"right\"}>\r\n                                {authUser.role.index ? <Button mx={1} variant={\"outlined\"} onClick={() => setMode(\"EDIT\")}>\r\n                                    수정\r\n                                </Button> : <></>}\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                        <Grid container>\r\n                            <Grid item xs={12}>\r\n                                <Box>\r\n                                    <Table>\r\n                                        <TableBody>\r\n                                            <TableRow>\r\n                                                <TableCell variant={\"head\"} component={\"th\"}>파라미터</TableCell>\r\n                                                <TableCell>\r\n                                                    <Link style={{cursor: \"pointer\"}}\r\n                                                          onClick={toggleEditModal}\r\n                                                    >YAML</Link>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                            {\r\n                                                collection['extIndexer'] ?\r\n                                                    <React.Fragment>\r\n                                                        <TableRow>\r\n                                                            <TableCell variant={\"head\"} component={\"th\"}>전용 인덱서</TableCell>\r\n                                                            <TableCell>\r\n                                                                {(collection['launcher']||{})['scheme']||''}://\r\n                                                                {(collection['launcher']||{})['host']||''}:\r\n                                                                {(collection['launcher']||{})['port'] === 0 ? \"\" : (collection['launcher']||{})['port']||''}\r\n                                                            </TableCell>\r\n                                                        </TableRow>\r\n                                                    </React.Fragment>\r\n                                                    :\r\n                                                    <React.Fragment>\r\n                                                        <TableRow>\r\n                                                            <TableCell variant={\"head\"} component={\"th\"}>전용인덱서 정보</TableCell>\r\n                                                            <TableCell> 사용안함 </TableCell>\r\n                                                        </TableRow>\r\n                                                    </React.Fragment>\r\n                                            }\r\n\r\n                                            <TableRow>\r\n                                                <TableCell variant={\"head\"} component={\"th\"}>엘라스틱서치 정보</TableCell>\r\n                                                <TableCell>\r\n                                                    {collection['esScheme']||''}://\r\n                                                    {collection['esHost']||''}:\r\n                                                    {collection['esPort']||''}\r\n                                                    {\r\n                                                        collection['esUser'] !== \"\" ?\r\n                                                            <Box component={\"span\"}> (사용자: {collection['esUser']})</Box>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n\r\n\r\n                                            <TableRow>\r\n                                                <TableCell variant={\"head\"} component={\"th\"}>JDBC</TableCell>\r\n                                                <TableCell>\r\n                                                    {\r\n                                                        useJdbcList.length === 0 ?\r\n                                                            \"사용안함\"\r\n                                                            :\r\n                                                            useJdbcList[0]\r\n                                                    }\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                            <TableRow>\r\n                                                <TableCell variant={\"head\"} component={\"th\"}>크론주기</TableCell>\r\n                                                <TableCell> {collection['cron']} </TableCell>\r\n                                            </TableRow>\r\n                                        </TableBody>\r\n                                    </Table>\r\n                                </Box>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Box>\r\n\r\n\r\n                    {/*======================================= EDIT MODE  ===========================================*/}\r\n\r\n                    <Box style={{display: mode === \"EDIT\" || mode === \"FORCE_EDIT\" ? \"block\" : \"none\"}}>\r\n                        <Grid container>\r\n                            <Grid item xs={8}>\r\n\r\n                            </Grid>\r\n                            <Grid item xs={4} align={\"right\"}>\r\n                                <Button mx={1}\r\n                                        variant={\"outlined\"}\r\n                                        onClick={handleSaveProcess}\r\n                                        style={{display: authUser.role.index ? 'inline' : 'none'}}\r\n                                >\r\n                                    저장\r\n                                </Button>\r\n                                <Button style={{display: authUser.role.index ? mode === 'EDIT' ? \"inline\" : \"none\" : \"none\"}} mx={1}\r\n                                        variant={\"outlined\"}\r\n                                        onClick={() => setMode(\"VIEW\")}\r\n                                >\r\n                                    취소\r\n                                </Button>\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid container>\r\n                            <Grid item xs={12}>\r\n                                <Box p={5}>\r\n                                    <Table>\r\n                                        <TableBody>\r\n\r\n                                            <TableRow>\r\n                                                <TableCell variant={\"head\"} component={\"th\"}>이름</TableCell>\r\n                                                <TableCell>\r\n                                                    <TextField \r\n                                                        inputRef={newSourceName}\r\n                                                        // 이전\r\n                                                        // value={sourceName}\r\n                                                        // onChange={event => setSourceName(event.target.value)}\r\n                                                        fullWidth\r\n                                                        error={invalid['sourceName']||false}\r\n                                                    />\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n\r\n                                            <TableRow>\r\n                                                <TableCell variant={\"head\"} component={\"th\"}>파라미터 YAML</TableCell>\r\n                                                <TableCell>\r\n                                                    {/*<TextareaAutosize value={launcherYaml}*/}\r\n                                                    {/*                  onChange={event => setLauncherYaml(event.target.value)}*/}\r\n                                                    {/*                  style={{width: \"100%\", minHeight: \"200px\"}}*/}\r\n                                                    {/*/>*/}\r\n                                                    <Box display=\"flex\" alignItems=\"center\"  justifyContent=\"space-between\" width=\"100%\" marginBottom=\"8px\">\r\n                                                        <div></div>\r\n                                                        <FormControl style={{width: \"200px\"}}>\r\n                                                            <InputLabel id=\"demo-simple-select-label\">수집소스 템플릿</InputLabel>\r\n                                                            <Select\r\n                                                                labelId=\"demo-simple-select-label\"\r\n                                                                id=\"demo-simple-select\"\r\n                                                                value={templateValue}\r\n                                                                onChange={handleTemplateValue}\r\n                                                            >\r\n                                                                {\r\n                                                                    TEMPLATE_LIST.map((item, i) => (<MenuItem key={i} value={item}>{item}</MenuItem>))\r\n                                                                }\r\n                                                            </Select>\r\n                                                        </FormControl>\r\n                                                    </Box>\r\n                                                    <AceEditor\r\n                                                        ref={aceEditor}\r\n                                                        mode=\"yaml\"\r\n                                                        theme=\"kuroir\"\r\n                                                        fontSize=\"15px\"\r\n                                                        height={\"400px\"}\r\n                                                        width=\"100%\"\r\n                                                        tabSize={2}\r\n                                                        placeholder=\"type: 'jdbc'\"\r\n                                                        setOptions={{ useWorker: false }}\r\n                                                        onChange={() => {\r\n                                                            let yaml = aceEditor.current.editor.getValue()\r\n                                                            if (launcherYaml !== yaml) {\r\n                                                                setLauncherYaml(yaml)\r\n                                                            }\r\n                                                        }}\r\n                                                    />\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                            <TableRow>\r\n                                                <TableCell variant={\"head\"} component={\"th\"}>JDBC</TableCell>\r\n                                                <TableCell>\r\n                                                    <Select value={jdbcId}\r\n                                                            onChange={event => setJdbcId(event.target.value)}\r\n                                                            style={{minWidth: \"100%\"}}\r\n                                                            error={invalid['jdbcId']||false}\r\n                                                    >\r\n                                                        {\r\n                                                            jdbcHitList.map((jdbcObj, index) => {\r\n                                                                return (\r\n                                                                    <MenuItem key={index}\r\n                                                                              value={jdbcObj['id']}\r\n                                                                    >\r\n                                                                        {(jdbcObj['sourceAsMap']||{})['name']||\"\"}\r\n                                                                    </MenuItem>\r\n                                                                )\r\n                                                            })\r\n                                                        }\r\n                                                    </Select>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n\r\n                                            <TableRow>\r\n                                                <TableCell variant={\"head\"} component={\"th\"}>크론주기</TableCell>\r\n                                                <TableCell>\r\n                                                    <Grid container>\r\n                                                        <Grid item xs={11}>\r\n                                                            <TextField \r\n                                                                inputRef={newCron}\r\n                                                                // value={cron}\r\n                                                                //        onChange={event => setCron(event.target.value)}\r\n                                                                       fullWidth\r\n                                                                       placeholder={\"분 시 일 월 요일 (default: 0 0 * * *)\"}\r\n                                                                       error={invalid['cron']||false}\r\n                                                            />\r\n                                                        </Grid>\r\n                                                        <Grid item xs={1}>\r\n                                                            <Link onMouseOver={handleClick('top')}>예제</Link>\r\n                                                            <Popper open={Boolean(open)} anchorEl={anchorEl}\r\n                                                                    placement={placement} transition>\r\n                                                                {({TransitionProps}) => (\r\n                                                                    <Fade {...TransitionProps} timeout={350}>\r\n                                                                        <Paper>\r\n                                                                            <Typography className={classes.typography}>\r\n                                                                                예제<br/>\r\n                                                                                */1 * * * * : 1분마다 한 번씩<br/>\r\n                                                                                */5 * * * * : 5분마다 한 번씩<br/>\r\n                                                                                0 5 1 * * : 매달 1일 새벽 5시에 실행.<br/>\r\n                                                                                0 5,11 * * 0,3 : 매주 일요일과 수요일 새벽 5시와 밤\r\n                                                                                11시.<br/>\r\n                                                                                0 5,11 * * * : 새벽 5시와 밤 11시\r\n                                                                            </Typography>\r\n                                                                        </Paper>\r\n                                                                    </Fade>\r\n                                                                )}\r\n                                                            </Popper>\r\n                                                        </Grid>\r\n                                                    </Grid>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n\r\n                                            <TableRow>\r\n                                                <TableCell variant={\"head\"} component={\"th\"}>엘라스틱서치 정보</TableCell>\r\n                                                <TableCell>\r\n                                                    <Box my={3}>\r\n                                                        <Select style={{minWidth: \"100%\"}}\r\n                                                                value={esScheme}\r\n                                                                onChange={e => setEsScheme(e.target.value)}\r\n                                                        >\r\n                                                            <MenuItem key={1}\r\n                                                                      value={\"http\"}\r\n                                                            >\r\n                                                                HTTP\r\n                                                            </MenuItem>\r\n                                                            <MenuItem key={1}\r\n                                                                      value={\"https\"}\r\n                                                            >\r\n                                                                HTTPS\r\n                                                            </MenuItem>\r\n                                                        </Select>\r\n                                                    </Box>\r\n                                                    <Box my={3}>\r\n                                                        <TextField \r\n                                                            inputRef={newEsHost}\r\n                                                            // value={esHost}\r\n                                                            // onChange={e => setEsHost(e.target.value)}\r\n                                                                   fullWidth\r\n                                                                   placeholder={\"elastic.com\"}\r\n                                                                   error={invalid['esHost']||false}\r\n                                                        />\r\n                                                    </Box>\r\n                                                    <Box my={3}>\r\n                                                        <TextField \r\n                                                            inputRef={newEsPort}\r\n                                                                // value={esPort}\r\n                                                                // onChange={e => setEsPort(e.target.value)}\r\n                                                                fullWidth\r\n                                                                type={\"number\"}\r\n                                                                placeholder={\"9200\"}\r\n                                                                error={invalid['esPort']||false}\r\n                                                        />\r\n                                                    </Box>\r\n                                                    <Box my={3}>\r\n                                                        <TextField \r\n                                                            inputRef={newEsUser}\r\n                                                        //  value={esUser}\r\n                                                        //            onChange={e => setEsUser(e.target.value)}\r\n                                                                   fullWidth\r\n                                                                   placeholder={\"elastic\"}\r\n                                                        />\r\n                                                    </Box>\r\n                                                    <Box my={3}>\r\n                                                        <TextField \r\n                                                            inputRef={newEsPassword}\r\n                                                            // value={esPassword}\r\n                                                            //        onChange={e => setEsPassword(e.target.value)}\r\n                                                                   fullWidth\r\n                                                                   type={\"password\"}\r\n                                                                   placeholder={\"password\"}\r\n                                                        />\r\n                                                    </Box>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n\r\n                                            <TableRow>\r\n                                                <TableCell variant={\"head\"} component={\"th\"}>전용인덱서</TableCell>\r\n                                                <TableCell>\r\n                                                    <Typography component=\"div\">\r\n                                                        <Grid component=\"label\" container alignItems=\"center\" spacing={1}>\r\n                                                            <Grid item>사용안함</Grid>\r\n                                                            <Grid item>\r\n                                                                <Switch checked={isExtIndexer} onChange={() => setExtIndexer((!isExtIndexer))}  />\r\n                                                            </Grid>\r\n                                                            <Grid item>사용</Grid>\r\n                                                        </Grid>\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n\r\n                                            <TableRow style={{display: isExtIndexer ? \"table-row\" : \"none\" }}>\r\n                                                <TableCell variant={\"head\"} component={\"th\"}>전용인덱서 정보</TableCell>\r\n                                                <TableCell>\r\n                                                    <Box my={3}>\r\n                                                        <Select style={{minWidth: \"100%\"}}\r\n                                                                value={scheme}\r\n                                                                onChange={e => setScheme(e.target.value)}\r\n                                                        >\r\n                                                            <MenuItem value={\"http\"}>\r\n                                                                HTTP\r\n                                                            </MenuItem>\r\n                                                            <MenuItem value={\"https\"}>\r\n                                                                HTTPS\r\n                                                            </MenuItem>\r\n                                                        </Select>\r\n                                                    </Box>\r\n                                                    <Box my={3}>\r\n                                                        <TextField \r\n                                                            inputRef={newHost}\r\n                                                            // value={host}\r\n                                                            //        onChange={event => setHost(event.target.value)}\r\n                                                                   fullWidth\r\n                                                                   placeholder={\"127.0.0.1\"}\r\n                                                                   error={invalid['host']||false}\r\n                                                        />\r\n                                                    </Box>\r\n                                                    <Box my={3}>\r\n                                                        <TextField \r\n                                                            inputRef={newPort}\r\n                                                            // value={port}\r\n                                                            //        onChange={event => setPort(event.target.value)}\r\n                                                                   fullWidth\r\n                                                                   placeholder={\"5005\"}\r\n                                                                   type={\"number\"}\r\n                                                                   error={invalid['port']||false}\r\n                                                        />\r\n                                                    </Box>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        </TableBody>\r\n                                    </Table>\r\n                                </Box>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Box>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            <Dialog open={Boolean(editModal)}\r\n                    fullWidth\r\n                    onClose={toggleEditModal}\r\n            >\r\n                <DialogTitle>\r\n                    설정\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <pre>\r\n                        {(collection['launcher'] || {})['yaml']}\r\n                    </pre>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={toggleEditModal}>닫기</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default connect(store => ({\r\n    authUser: store.dsearchReducers.authUser,\r\n    ...store.collectionReducers,\r\n    ...store.jdbcReducers,\r\n    ...store.clusterReducers,\r\n}))(Source);\r\n"],"sourceRoot":""}