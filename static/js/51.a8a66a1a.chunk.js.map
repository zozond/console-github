{"version":3,"sources":["redux/actions/rankingTuningActions.js","pages/analysis/rankingTuning/index.js","redux/actions/indicesActions.js","components/IndicesSelect/index.js"],"names":["client","Client","setDocumentList","data","dispatch","call","uri","method","then","response","type","SET_RANKING_TUNING_DOCUMENT","payload","resetDocumentList","Total","SearchResponse","analyzerTokensMap","useStyles","makeStyles","theme","formControl","minWidth","Card","styled","MuiCard","spacing","Divider","MuiDivider","Table","MuiTable","ids","ScoreTreeView","details","expand","nodeToggle","description","TreeView","defaultExpanded","expanded","onNodeToggle","style","flexGrow","defaultCollapseIcon","defaultExpandIcon","TreeItem","key","nodeId","label","getTreeItemsFromData","treeItems","map","detail","children","undefined","length","value","ResultDocument","result","item","_index","dataList","Object","keys","forEach","id","text","analyzerTokens","find","obj","push","field","tokens","TableBody","index","tokenValue","t","join","JSON","stringify","TableRow","TableCell","fontWeight","colSpan","_explanation","RankingTuningResults","pageNum","errorMessage","margin","overflow","TableHead","align","number","Typography","eventCode","RankingTuningCard","classes","aceEditor","useRef","inputIndex","useState","setPageNum","progress","setProgress","setExpand","checked","setChecked","autoHeight","setAutoHeight","setErrorMessage","query","setQuery","useEffect","current","editor","setValue","clearInterval","setInterval","windowHeight","Math","ceil","window","innerHeight","handlePagination","document","querySelector","scrollTo","jsonData","assign","parse","explain","from","size","isMultiple","catch","error","message","error1","mb","CardContent","Grid","container","xs","md","lg","Box","display","alignItems","justifyContent","mx","TextField","className","inputRef","IndicesSelect","FormControlLabel","whiteSpace","control","Switch","onChange","evnet","color","name","inputProps","border","ref","mode","fontSize","height","width","placeholder","setOptions","useWorker","mt","CircularProgress","Button","fullWidth","variant","onClick","event","str","e","isJson","getValue","replace","Hidden","lgUp","m","Link","href","changeExpand","i","disabled","component","Number","connect","store","rankingTuningReducers","indicesReducers","Fragment","title","gutterBottom","my","setIndexAction","SET_INDEX","setIndicesAction","params","format","SET_INDICES","console","setIndexInfoListAction","SET_INDEX_INFO_LIST","setIndexAliasesAction","SET_INDEX_ALIASES","setIndexSettingsAction","SET_INDEX_SETTINGS","setIndexMappingsAction","SET_INDEX_MAPPINGS","setIndexStateAction","SET_INDEX_STATE","editDynamicQueryAction","setIndexDocumentSourceListAction","columns","keyword","match","_id","sort","order","bool","minimum_should_match","should","multi_match","fields","operator","boost","_score","SET_INDEX_DOCUMENT_SOURCE_RESPONSE","editIndexDocumentSourceAction","body","addIndexDocumentSourceAction","deleteIndexDocumentSourceAction","analyzerDocumentSourceAction","analyzerDocument","setIndexManagedAction","action","deleteIndexAction","indices","enableSystem","onSelected","labelId","target","filter","startsWith"],"mappings":"4PAGMA,EAAS,I,MAAIC,GAENC,EAAkB,SAACC,GAAD,OAAU,SAAAC,GAAQ,OAAIJ,EAAOK,KAAK,CAC7DC,IAAK,kBACLC,OAAQ,OACRJ,KAAMA,IACPK,MAAK,SAAAC,GAAQ,OAAIL,EAAS,CAACM,KAAMC,IAA6BC,QAASH,EAASN,YAEtEU,EAAoB,kBAAM,SAAAT,GAAQ,OAAIA,EAAS,CAACM,KAAMC,IAA6BC,QAAS,CACjGE,MAAQ,GACRC,eAAgB,GAChBC,kBAAmB,Q,oOCqBrBC,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,YAAa,CACTC,SAAU,SAIZC,EAAOC,YAAOC,IAAPD,CAAgBE,KACvBC,EAAUH,YAAOI,IAAPJ,CAAmBE,KAC7BG,EAAQL,YAAOM,IAAPN,CAAiBE,KAE3BK,EAAM,EAkCV,SAASC,EAAT,GAAoE,IAA5CC,EAA2C,EAA3CA,QAASC,EAAkC,EAAlCA,OAAQC,EAA0B,EAA1BA,WAAYC,EAAc,EAAdA,YACjD,OACI,kBAACC,EAAA,EAAD,CACIC,gBAAiBJ,EACjBK,SAAUL,EACVM,aAAcL,EACdM,MAAO,CAAEC,SAAU,GACnBC,oBAAqB,kBAAC,IAAD,MACrBC,kBAAmB,kBAAC,IAAD,OAEnB,kBAACC,EAAA,EAAD,CAAUC,IAAKf,EAAKgB,OAAM,cAAShB,KAASiB,MAAOZ,GAhClC,SAAvBa,EAAuBC,GACzB,OAAOA,EAAUC,KAAI,SAAAC,GACnB,IAAIC,OAAWC,EAKf,OAJIF,EAAOnB,SAAWmB,EAAOnB,QAAQsB,OAAS,IAC5CF,EAAWJ,EAAqBG,EAAOnB,UAIvC,kBAACY,EAAA,EAAD,CACEC,IAAKf,EAELgB,OAAM,cAAShB,KACfiB,MAAOI,EAAOI,MAAQ,MAAQJ,EAAOhB,YACrCiB,SAAUA,OAoBHJ,CAAqBhB,KAMtC,SAASwB,EAAT,GAA6D,IAApCC,EAAmC,EAAnCA,OAAQC,EAA2B,EAA3BA,KAAMzB,EAAqB,EAArBA,OAAQC,EAAa,EAAbA,WAC3C,GAAoC,IAAjCuB,EAAO1C,eAAeuC,OAAc,OAAO,qCAE9C,IAAMtC,EAAoByC,EAAOzC,kBAAkB0C,EAAKC,QACpDC,EAAW,GAkCf,OAhCAC,OAAOC,KAAKJ,GAAMK,SAAQ,SAAAlB,GACtB,IAAMmB,EAAKN,EAAI,IACXO,EAAOP,EAAKb,GAChB,GAAI,iBAAmBA,GAAO,QAAWA,GAAO,WAAaA,EACzD,OAAO,EAGX,QAA8BQ,IAA1BrC,EAAkBgD,GAAmB,CACrC,IACME,EADoBlD,EAAkBgD,GACHG,MAAK,SAAAC,GAAG,OAAIA,EAAG,QAAcvB,UAC/CQ,IAAnBa,QAA6Db,IAA7Ba,EAAc,QAAyD,OAA7BA,EAAc,QAAuBA,EAAc,OAAWZ,OAAS,EACjJM,EAASS,KAAK,CACVC,MAAOzB,EACPoB,KAAMA,EACNM,OAAQL,EAAc,SAG1BN,EAASS,KAAK,CACVC,MAAOzB,EACPoB,KAAMA,EACNM,OAAQ,UAIhBX,EAASS,KAAK,CACVC,MAAOzB,EACPoB,KAAMA,EACNM,OAAQ,QAMhB,kBAAC,EAAD,KACI,kBAACC,EAAA,EAAD,KAEQZ,EAASV,KAAI,SAAC/C,EAAMsE,GAChB,IAAIC,GAAcvE,EAAI,QAAY,IAAI+C,KAAI,SAAAyB,GAAC,iBAAQA,EAAR,QAAcC,KAAK,MAC1DX,EAAOY,KAAKC,UAAU3E,EAAI,MAC1BmE,EAAQnE,EAAI,MAChB,OACI,kBAAC4E,EAAA,EAAD,CAAUlC,IAAK,QAAU4B,GACrB,kBAACO,EAAA,EAAD,CAAWxC,MAAO,CAACyC,WAAY,SAAUX,GACzC,kBAACU,EAAA,EAAD,KAAYf,GACZ,kBAACe,EAAA,EAAD,KAAYN,EAAWpB,OAAS,EAAIoB,EAAaT,OAKjE,kBAACc,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,qBACA,kBAACA,EAAA,EAAD,CAAWE,QAAS,GACf,kBAACnD,EAAD,CAAeI,YAAauB,EAAKyB,aAAahD,YAC/BH,QAAS0B,EAAKyB,aAAanD,QAC3BC,OAAQA,EACRC,WAAYA,QASpD,SAASkD,EAAT,GAAoF,IAArDC,EAAoD,EAApDA,QAAS5B,EAA2C,EAA3CA,OAAQxB,EAAmC,EAAnCA,OAAQC,EAA2B,EAA3BA,WAAYoD,EAAe,EAAfA,aAGhE,OAFAxD,EAAM,EAEFwD,EAAahC,OAAS,EAElB,kBAAC,EAAD,CAAOd,MAAO,CAAE+C,OAAQ,MAAOC,SAAU,WACrC,kBAACC,EAAA,EAAD,KACI,kBAACV,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWU,MAAM,UAAjB,qBAGR,kBAAClB,EAAA,EAAD,KACI,kBAACO,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,KACI,6BACKM,OASrB,kBAAC,EAAD,CAAO9C,MAAO,CAAE+C,OAAQ,MAAOC,SAAU,WACrC,kBAACC,EAAA,EAAD,KACI,kBAACV,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWU,MAAM,SAAjB,OACA,kBAACV,EAAA,EAAD,CAAWU,MAAM,UAAjB,iCAGR,kBAAClB,EAAA,EAAD,KACsC,IAAjCf,EAAO1C,eAAeuC,OACnBG,EAAO1C,eAAemC,KAAI,SAACQ,EAAMe,GAC7B,IAAIkB,EAASlB,EAAqB,IAAXY,EAAQ,GAAS,EAExC,OAAQ,kBAACN,EAAA,EAAD,CAAUlC,IAAK,IAAM8C,GACzB,kBAACX,EAAA,EAAD,CAAWxC,MAAO,CAACyC,WAAY,QAASS,MAAM,SAASC,GACvD,kBAACX,EAAA,EAAD,KACI,kBAACxB,EAAD,CAAgBC,OAAQA,EAAQC,KAAMA,EAAMzB,OAAQA,EAAQC,WAAYA,SAIlF,kBAAC6C,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAWU,MAAM,UACjB,kBAACV,EAAA,EAAD,CAAWU,MAAM,UACb,kBAACE,EAAA,EAAD,yFAShC,IAAIC,EAAY,KAChB,SAASC,EAAT,GAAuD,IAA3B1F,EAA0B,EAA1BA,SAAUqD,EAAgB,EAAhBA,OAAQgB,EAAQ,EAARA,MACpCsB,EAAU9E,IACV+E,EAAYC,iBAAO,IACrBC,EAAaD,iBAAO,IAH0B,EAKpBE,mBAAS,GALW,mBAK3Cd,EAL2C,KAKlCe,EALkC,OAMlBD,oBAAS,GANS,mBAM3CE,EAN2C,KAMjCC,EANiC,OAOtBH,mBAAS,IAPa,mBAO3ClE,EAP2C,KAOnCsE,EAPmC,OAQpBJ,oBAAS,GARW,mBAQ3CK,EAR2C,KAQlCC,EARkC,OASdN,mBAAS,SATK,mBAS3CO,EAT2C,KAS/BC,EAT+B,OAUVR,mBAAS,IAVC,mBAU3Cb,EAV2C,KAU7BsB,EAV6B,QAWxBT,mBAAS,IAXe,qBAW3CU,GAX2C,MAWpCC,GAXoC,MAalDC,qBAAU,WAmBN,OAlBA3G,EAASS,KACTiG,GAAS,IACTV,EAAW,GACXQ,EAAgB,IAChBZ,EAAUgB,QAAQC,OAAOC,SAlMX,2GAoMI,OAAdrB,GACAsB,cAActB,GAElBA,EAAYuB,aAAY,WACpB,IAAIC,EAAeC,KAAKC,KAA0B,GAArBC,OAAOC,aAChCJ,EAAe,IACfA,EAAe,IACRA,EAAe,MACtBA,EAAeC,KAAKC,KAA0B,GAArBC,OAAOC,cAEpCd,EAAcU,EAAe,QAC9B,KACI,WACe,OAAdxB,GACAsB,cAActB,MAGvB,IAgFH,SAAS6B,GAAiBrC,GAEtBuB,EAAgB,IAChB9E,EAAM,EAKN6F,SAASC,cAAc,SAASC,SAAS,EAAG,GAC5CvB,GAAY,GAEZ,IAAIwB,EAAWjE,OAAOkE,OAAOlD,KAAKmD,MAAMnB,IAAO,CAC3CoB,SAAS,EACTC,KAAuB,IAAf7C,EAAU,GAClB8C,KAAM,KAMNhI,EAAO,GACRqG,GACCrG,EAAKiI,YAAa,EAClBjI,EAAKsE,MAAQyB,EAAWc,QAAQzD,QAEhCpD,EAAKiI,YAAa,EAClBjI,EAAKsE,MAAQA,GAGjBtE,EAAK8D,KAAOY,KAAKC,UAAUgD,GAC3B1H,EAASF,EAAgBC,IAAOK,MAAK,WACjC8F,GAAY,MACb+B,OAAM,SAACC,GACNlI,EAASS,KACT,IACI+F,EAAgB0B,EAAM7H,SAASN,KAAKoI,SACtC,MAAOC,GACL5B,EAAgB0B,OAGxBlC,EAAWf,GAGf,OACI,kBAAC,EAAD,CAAMoD,GAAI,GACN,kBAACC,EAAA,EAAD,KAEI,kBAACC,EAAA,EAAD,CAAMC,WAAS,GACX,kBAACD,EAAA,EAAD,CAAMjF,MAAI,EAACmF,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAE3B,kBAACC,EAAA,EAAD,CAAKC,QAAQ,OAAQC,WAAW,SAAUC,eAAe,gBAAgBC,GAAI,EAAGX,GAAI,GAC/EjC,EAAU,kBAAC6C,EAAA,EAAD,CAAWC,UAAWvD,EAAQ3E,YAAamI,SAAUrD,EAAYnD,MAAM,kEAAkB,kBAACyG,EAAA,EAAD,MACpG,kBAACC,EAAA,EAAD,CACIjH,MAAO,CAACkH,WAAY,UACpBC,QACI,kBAACC,EAAA,EAAD,CACIpD,QAASA,EACTqD,SAtId,SAACC,GACnBrD,GAAYD,IAsIoBuD,MAAM,UACNC,KAAK,oBACLC,WAAY,CAAE,aAAc,sBAGpClH,MAAM,+BAId,kBAACiG,EAAA,EAAD,CAAKI,GAAI,EAAG5G,MAAO,CAAC0H,OAAQ,qBACxB,kBAAC,IAAD,CACIC,IAAKnE,EACLhC,GAAG,YACHoG,KAAK,OACLjJ,MAAM,SACNkJ,SAAS,OACTC,OAAQ5D,EACR6D,MAAM,OACNC,YAAY,uEACZC,WAAY,CAAEC,WAAW,MAIjC,kBAAC1B,EAAA,EAAD,CAAKtD,MAAM,QAAQ0D,GAAI,EAAGuB,GAAI,GACzBtE,EAAU,kBAACuE,EAAA,EAAD,MAAuB,kBAACC,EAAA,EAAD,CAAQC,WAAS,EAACC,QAAQ,WAAWhB,MAAM,UAAUiB,QAxIrF,SAACC,GAOvB,GALA7E,EAAW,GACXU,GAAS,IACTF,EAAgB,IAEhB9E,EAAM,EAdV,SAAgBoJ,GACZ,IAEI,MAAwB,kBADbrG,KAAKmD,MAAMkD,GAExB,MAAOC,GACL,OAAO,GAUPC,CAAOpF,EAAUgB,QAAQC,OAAOoE,YAApC,CAMA1D,SAASC,cAAc,SAASC,SAAS,EAAG,GAE5CvB,GAAY,GACZ,IAAIwB,EAAWjD,KAAKmD,MAAMhC,EAAUgB,QAAQC,OAAOoE,YACnDvD,EAASG,SAAU,EACnBH,EAASI,KAAO,EAChBJ,EAASK,KAAO,GAChB,IAAIhI,EAAO,GAERqG,GACCrG,EAAKiI,YAAa,EAClBjI,EAAKsE,MAAQyB,EAAWc,QAAQzD,MAAM+H,QAAQ,MAAO,IACrDnL,EAAK8D,KAAOY,KAAKC,UAAUgD,KAE3B3H,EAAKiI,YAAa,EAClBjI,EAAKsE,MAAQA,EACbtE,EAAK8D,KAAOY,KAAKC,UAAUgD,IAG/B1H,EAASF,EAAgBC,IAAOK,MAAK,SAACiD,GAC9BA,EAAO7C,QAAQE,MAAMyC,MAAQ,EAAI6C,EAAW,GAC3CA,EAAW,GAChBE,GAAY,GACZQ,GAASd,EAAUgB,QAAQC,OAAOoE,eACnChD,OAAM,SAACC,GACNxB,GAAS,IACT1G,EAASS,KACTuF,EAAW,GACXE,GAAY,GACZ,IACIM,EAAgB0B,EAAM7H,SAASN,KAAKoI,SACtC,MAAOC,GACL5B,EAAgB0B,YArCpB1B,EAAgB,0EAgIkC,kBAS1C,kBAAC+B,EAAA,EAAD,CAAMjF,MAAI,EAACmF,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAE3B,kBAACwC,EAAA,EAAD,CAAQC,MAAI,GACR,kBAACxC,EAAA,EAAD,CAAK2B,GAAI,IAAT,MAGJ,kBAAC3B,EAAA,EAAD,CAAKC,QAAQ,OAAOC,WAAW,SAAUC,eAAe,gBAAgBC,GAAI,EAAG5G,MAAO,CAAC8H,OAAQ,SAC3F,kBAAC1E,EAAA,EAAD,CAAYmF,QAAQ,MAApB,UAA4BtH,EAAO3C,MAAMyC,MAAQE,EAAO3C,MAAMyC,MAAQ,IAAtE,yCACA,kBAACyF,EAAA,EAAD,CAAKC,QAAQ,QACT,kBAACD,EAAA,EAAD,CAAKyC,EAAG,GAAG,kBAACC,EAAA,EAAD,CAAMC,KAAK,IAAIX,QA7K9B,SAACC,GAErB,IADA,IAAIW,EAAe,GACVC,EAAI,EAAGA,GAAK/J,EAAK+J,IACtBD,EAAavH,KAAb,cAAyBwH,IAC7BtF,EAAUqF,KAyKyB,wCACX,kBAAC5C,EAAA,EAAD,CAAKyC,EAAG,GAAG,kBAACC,EAAA,EAAD,CAAMC,KAAK,IAAIX,QAvKhC,SAACC,GACnB1E,EAAU,MAsKyB,oCAGnB,kBAACyC,EAAA,EAAD,CAAKxG,MAAO,CAACgD,SAAU,SAAU8E,OAAQ5D,EAAYwD,OAAQ,oBAAqBd,GAAI,EAAGpF,GAAG,QACpF,kBAACoB,EAAD,CAAsBC,QAASA,EAAS5B,OAAQA,EAAQxB,OAAQA,EAAQC,WA7GpG,SAAoB+I,EAAO3I,GACvBiE,EAAUjE,IA4G8GgD,aAAcA,KAEtH,kBAAC0D,EAAA,EAAD,CAAKtD,MAAM,SAAS0D,GAAI,EAAGuB,GAAI,GAC3B,kBAACE,EAAA,EAAD,CACIE,QAAQ,WACRhB,MAAM,UACNiB,QAAS,kBAAMtD,GAAiBrC,EAAU,IAC1CyG,SAAsB,IAAZzG,GAA6B,IAAZA,GAJ/B,kBAMA,kBAAC2D,EAAA,EAAD,CAAK+C,UAAW,OAAQN,EAAG,GACtBpG,EADL,MACiB5B,EAAO3C,MAAMyC,MAAU+D,KAAKC,KAAKyE,OAAOvI,EAAO3C,MAAMyC,OAAS,IAAO,KAEtF,kBAACsH,EAAA,EAAD,CACIE,QAAQ,WACRhB,MAAM,UACNiB,QAAS,kBAAMtD,GAAiBrC,EAAU,IAC1CyG,SAAsB,IAAZzG,GAAuBiC,KAAKC,KAAKyE,OAAOvI,EAAO3C,MAAMyC,OAAS,MAAQ8B,GAJpF,uBAoJb4G,uBAAQ,SAAAC,GAAK,MAAK,CAC7BzI,OAAQyI,EAAMC,sBAAsB1I,OACpCgB,MAAOyH,EAAME,gBAAgB3H,SAFlBwH,EAxBf,YAAoD,IAA3B7L,EAA0B,EAA1BA,SAAUqD,EAAgB,EAAhBA,OAAQgB,EAAQ,EAARA,MAMvC,OAJAsC,qBAAU,WACN,OAAO,kBAAM3G,EAASS,QACvB,IAGC,kBAAC,IAAMwL,SAAP,KACI,kBAAC,IAAD,CAAQC,MAAM,6BACd,kBAAC1G,EAAA,EAAD,CAAYmF,QAAQ,KAAKwB,cAAY,EAACtD,QAAQ,UAA9C,4BAIA,kBAAC,EAAD,CAASuD,GAAI,IAEb,kBAAC7D,EAAA,EAAD,CAAMC,WAAS,EAACnH,QAAS,GACrB,kBAACkH,EAAA,EAAD,CAAMjF,MAAI,EAACmF,GAAI,IACX,kBAAC/C,EAAD,CAAmB1F,SAAUA,EAAUqD,OAAQA,EAAQgB,MAAOA,W,iCCrlBlF,ihBAaMzE,EAAS,IAAIC,IAGNwM,EAAiB,SAAChI,GAAD,OAAW,SAAArE,GAAQ,OAAIA,EAAS,CAACM,KAAMgM,IAAW9L,QAAS6D,MAE5EkI,EAAmB,kBAAM,SAAAvM,GAAQ,OAC1CJ,EAAOK,KAAK,CACRC,IAAI,8BACJsM,OAAQ,CACJC,OAAQ,UAGXrM,MAAK,SAAAC,GAAQ,OAAIL,EAAS,CAACM,KAAMoM,IAAalM,QAASH,EAASN,UAChEkI,OAAM,SAAAC,GAAK,OAAIyE,QAAQzE,MAAMA,QAGzB0E,EAAyB,SAACvI,GAAD,OAAW,SAAArE,GAAQ,OACrDJ,EAAOK,KAAK,CACRC,IAAI,+BAAD,OAAiCmE,GACpCmI,OAAQ,CACJC,OAAQ,UAGXrM,MAAK,SAAAC,GAAQ,OAAIL,EAAS,CAACM,KAAMuM,IAAqBrM,QAASH,EAASN,UACxEkI,OAAM,SAAAC,GAAK,OAAIyE,QAAQzE,MAAMA,QAGzB4E,EAAwB,SAACzI,GAAD,OAAW,SAAArE,GAAQ,OACpDJ,EAAOK,KAAK,CACRC,IAAI,kBAAD,OAAoBmE,EAApB,WACHmI,OAAQ,CACJC,OAAQ,UAGXrM,MAAK,SAAAC,GAAQ,OAAIL,EAAS,CAACM,KAAMyM,IAAmBvM,SAAUH,EAASN,KAAKsE,IAAU,IAAzB,aAC7D4D,OAAM,SAAAC,GAAK,OAAIyE,QAAQzE,MAAMA,QAEzB8E,EAAyB,SAAC3I,GAAD,OAAW,SAAArE,GAAQ,OACrDJ,EAAOK,KAAK,CACRC,IAAI,kBAAD,OAAoBmE,EAApB,+BACHmI,OAAQ,CACJC,OAAQ,UAGXrM,MAAK,SAAAC,GAAQ,OAAIL,EAAS,CAACM,KAAM2M,IAAoBzM,QAASH,EAASN,KAAKsE,IAAQ,QACpF4D,OAAM,SAAAC,GAAK,OAAIyE,QAAQzE,MAAMA,QAEzBgF,EAAyB,SAAC7I,GAAD,OAAW,SAAArE,GAAQ,OACrDJ,EAAOK,KAAK,CACRC,IAAI,kBAAD,OAAoBmE,EAApB,cACHmI,OAAQ,CACJC,OAAQ,UAGXrM,MAAK,SAAAC,GAAQ,OAAIL,EAAS,CAACM,KAAM6M,IAAoB3M,SAAWH,EAASN,KAAKsE,IAAU,IAAzB,UAA0C,QACzG4D,OAAM,SAAAC,GAAK,OAAIyE,QAAQzE,MAAMA,QAGzBkF,EAAsB,SAAC/I,GAAD,OAAW,SAAArE,GAAQ,OAClDJ,EAAOK,KAAK,CACRC,IAAI,kBAAD,OAAoBmE,EAApB,WACHmI,OAAQ,CACJC,OAAQ,UAGXrM,MAAK,SAAAC,GAAQ,OAAIL,EAAS,CAACM,KAAM+M,IAAiB7M,QAASH,EAASN,UACpEkI,OAAM,SAAAC,GAAK,OAAIyE,QAAQzE,MAAMA,QAEzBoF,EAAyB,SAACjJ,EAAOoC,GAAR,OAAkB,SAAAzG,GAAQ,OAAIJ,EAAOK,KAAK,CAC5EC,IAAI,kBAAD,OAAoBmE,EAApB,cACHlE,OAAQ,MACRJ,KAAM0G,MAmBG8G,EAAmC,SAAC,GAAD,IAAElJ,EAAF,EAAEA,MAAOyD,EAAT,EAASA,KAAMC,EAAf,EAAeA,KAAMnE,EAArB,EAAqBA,GAAI4J,EAAzB,EAAyBA,QAAzB,IAAkCC,eAAlC,MAA4C,KAA5C,SAAsD,SAAAzN,GAAQ,OAAIJ,EAAOK,KAAK,CAC1HC,IAAI,kBAAD,OAAoBmE,EAApB,YACHlE,OAAQ,OACRJ,UAAakD,IAAPW,GAA2B,OAAPA,GAAsB,KAAPA,EACrC,CAAE6C,MAAO,CAAEiH,MAAO,CAAEC,IAAK/J,IAAQkE,OAAMC,OAAM6F,KAAM,CAAC,CAAED,IAAK,CAAEE,MAAO,gBAExD5K,IAAZwK,GAAqC,OAAZA,GAAgC,KAAZA,EACzC,CAAEhH,MAAO,CACDqH,KAAM,CACFC,qBAAsB,EACtBC,OAAQ,CACJ,CACIC,YAAa,CACTxH,MAAOgH,EACPS,OAAQV,EACRW,SAAU,KACVC,MAAO,IAGf,CACIV,MAAO,CACHC,IAAKF,OAMzB3F,OACAC,OACA6F,KAAM,CACF,CAACS,OAAQ,CAACR,MAAO,WAKzB,CAAE/F,OAAMC,OAAM6F,KAAM,CAChB,CAAES,OAAQ,CAAER,MAAO,aAIhCzN,MAAK,SAAAC,GAEJ,OADAL,EAAS,CAAEM,KAAMgO,IAAoC9N,QAASH,EAASN,OAChEM,EAASN,UAGPwO,EAAgC,SAAC,GAAD,IAAElK,EAAF,EAAEA,MAAOT,EAAT,EAASA,GAAI4K,EAAb,EAAaA,KAAb,OAAuB,SAAAxO,GAAQ,OAAIJ,EAAOK,KAAK,CACxFC,IAAI,kBAAD,OAAoBmE,EAApB,iBAAkCT,GACrCzD,OAAQ,MACRJ,KAAMyO,IACPpO,MAAK,SAAAC,GAAQ,OAAIA,EAASN,UAEhB0O,EAA+B,SAAC,GAAD,IAAEpK,EAAF,EAAEA,MAAOmK,EAAT,EAASA,KAAT,OAAmB,SAAAxO,GAAQ,OAAIJ,EAAOK,KAAK,CACnFC,IAAI,kBAAD,OAAoBmE,EAApB,SACHlE,OAAQ,OACRJ,KAAMyO,IACPpO,MAAK,SAAAC,GAAQ,OAAIA,EAASN,UAEhB2O,EAAkC,SAAC,GAAD,IAAErK,EAAF,EAAEA,MAAOT,EAAT,EAASA,GAAT,OAAiB,SAAA5D,GAAQ,OAAIJ,EAAOK,KAAK,CACpFC,IAAI,kBAAD,OAAoBmE,EAApB,iBAAkCT,GACrCzD,OAAQ,WACTC,MAAK,SAAAC,GAAQ,OAAIA,EAASN,UAEhB4O,EAA+B,SAACtK,EAAOuK,GAAR,OAA6B,SAAA5O,GAAQ,OAAIJ,EAAOK,KAAK,CAC7FC,IAAI,YAAD,OAAcmE,EAAd,aACHlE,OAAQ,OACRJ,KAAM6O,IACPxO,MAAK,SAAAC,GAAQ,OAAIA,EAASN,UAGhB8O,EAAwB,SAACC,EAAQzK,GAAT,OAAmB,SAAArE,GAAQ,OAAIJ,EAAOK,KAAK,CAC5EC,IAAI,kBAAD,OAAoBmE,EAApB,YAA6ByK,GAChC3O,OAAQ,SACTC,MAAK,SAAAC,GAAQ,OAAIA,EAASN,UAEhBgP,EAAoB,SAAA1K,GAAK,OAAI,SAAArE,GAAQ,OAAIJ,EAAOK,KAAK,CAC9DC,IAAI,kBAAD,OAAoBmE,GACvBlE,OAAQ,WACTC,MAAK,SAAAC,GAAQ,OAAIA,EAASN,W,mIC9KvBc,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,YAAa,CACTC,SAAU,SAgDH4K,iBAAQ,SAAAC,GAAK,sBACrBA,EAAME,mBADEH,EA5Cf,YAAmF,IAA3D7L,EAA0D,EAA1DA,SAAUgP,EAAgD,EAAhDA,QAAS3K,EAAuC,EAAvCA,MAAuC,IAAhC4K,oBAAgC,SAAbC,EAAa,EAAbA,WAC3DvJ,EAAU9E,IAYhB,OAJA8F,qBAAU,WACN3G,EAASuM,iBACV,IAGC,kBAAC,IAAMN,SAAP,KACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAa/C,UAAWvD,EAAQ3E,aAC5B,kBAAC,IAAD,CAAY4C,GAAG,4BAAf,sBACA,kBAAC,IAAD,CACIuL,QAAQ,2BACRvL,GAAG,qBACHT,MAAOkB,EACPoF,SApBC,SAACoB,GACdqE,GACAA,EAAWrE,EAAMuE,OAAOjM,OAE5BnD,EAASqM,YAAexB,EAAMuE,OAAOjM,UAmBjB6L,EAAQK,QAAO,SAAAhL,GAAK,QAAK4K,IAAgB5K,EAAK,MAAUiL,WAAW,QAAcxM,KAAI,SAAAuB,GAAK,OAAIA,EAAK,SAAWuJ,OACzG9K,KAAI,SAACuB,EAAOoH,GAAR,OAAe,kBAAC,IAAD,CAAUhJ,IAAKgJ,EAAGtI,MAAOkB,GAAQA,SAazE","file":"static/js/51.a8a66a1a.chunk.js","sourcesContent":["import {SET_RANKING_TUNING_DOCUMENT} from \"../constants\";\r\nimport Client from '~/Client'\r\n\r\nconst client = new Client()\r\n\r\nexport const setDocumentList = (data) => dispatch => client.call({\r\n    uri: \"/rankingtuning/\",\r\n    method: 'POST',\r\n    data: data\r\n}).then(response => dispatch({type: SET_RANKING_TUNING_DOCUMENT, payload: response.data}))\r\n\r\nexport const resetDocumentList = () => dispatch => dispatch({type: SET_RANKING_TUNING_DOCUMENT, payload: {\r\n        Total : {},\r\n        SearchResponse: [],\r\n        analyzerTokensMap: {}\r\n    }})\r\n\r\n\r\n// export const setDocumentList = (index, data) => dispatch => client.call({\r\n//     uri: \"/elasticsearch/\"+ index+ \"/_search\",\r\n//     method: 'POST',\r\n//     data: data\r\n// }).then(response => dispatch({type: SET_RANKING_TUNING_DOCUMENT, payload: response.data}))","import React, { useEffect, useState, useRef } from \"react\";\r\nimport styled from \"styled-components\";\r\n// import { NavLink as RouterNavLink} from \"react-router-dom\";\r\nimport Helmet from 'react-helmet';\r\nimport { spacing } from \"@material-ui/system\";\r\nimport AceEditor from \"react-ace\";\r\nimport { connect } from \"react-redux\";\r\nimport \"ace-builds/src-noconflict/mode-json\";\r\nimport \"ace-builds/src-noconflict/theme-kuroir\";\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport { setDocumentList } from '@actions/rankingTuningActions'\r\n\r\nimport {\r\n    Box, Link, CircularProgress,\r\n    Table as MuiTable, TableRow, TableCell, TableHead, TableBody,\r\n    TextField, Switch,\r\n    Card as MuiCard,\r\n    CardContent,\r\n    Divider as MuiDivider,\r\n    Grid,\r\n    Button,\r\n    Typography,\r\n    FormControlLabel, Hidden\r\n} from \"@material-ui/core\";\r\n\r\nimport { TreeView, TreeItem } from '@material-ui/lab';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport IndicesSelect from \"../../../components/IndicesSelect\";\r\nimport {resetDocumentList} from \"../../../redux/actions/rankingTuningActions\";\r\n\r\n// const NavLink = React.forwardRef((props, ref) => (\r\n//     <RouterNavLink innerRef={ref} {...props} />\r\n// ));\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formControl: {\r\n        minWidth: 250\r\n    }\r\n}));\r\n\r\nconst Card = styled(MuiCard)(spacing);\r\nconst Divider = styled(MuiDivider)(spacing);\r\nconst Table = styled(MuiTable)(spacing);\r\n\r\nlet ids = 1;\r\nconst DEFAULT_TEMPLATE = `\r\n{\r\n    \"query\": {\r\n      \"match\": {\r\n        \"productName\": \"노트북\"\r\n      }\r\n    }\r\n}\r\n`;\r\n\r\n\r\nconst getTreeItemsFromData = treeItems => {\r\n    return treeItems.map(detail => {\r\n      let children = undefined;\r\n      if (detail.details && detail.details.length > 0) {\r\n        children = getTreeItemsFromData(detail.details);\r\n      }\r\n    \r\n      return (\r\n        <TreeItem\r\n          key={ids}\r\n          // nodeId={ids++}\r\n          nodeId={`node${ids++}`}\r\n          label={detail.value + \" : \" + detail.description}\r\n          children={children}\r\n        />\r\n      );\r\n    });\r\n  };\r\n  \r\n\r\n  \r\n\r\nfunction ScoreTreeView({details, expand, nodeToggle, description}) {\r\n    return (\r\n        <TreeView\r\n            defaultExpanded={expand}\r\n            expanded={expand}\r\n            onNodeToggle={nodeToggle}\r\n            style={{ flexGrow: 1 }}\r\n            defaultCollapseIcon={<ExpandMoreIcon />}\r\n            defaultExpandIcon={<ChevronRightIcon />}\r\n        >\r\n            <TreeItem key={ids} nodeId={`node${ids++}`} label={description}>\r\n                {getTreeItemsFromData(details)}\r\n            </TreeItem>\r\n        </TreeView>\r\n    );\r\n}\r\n\r\nfunction ResultDocument({result, item, expand, nodeToggle}) {\r\n    if(result.SearchResponse.length === 0) return <></>;\r\n\r\n    const analyzerTokensMap = result.analyzerTokensMap[item._index]\r\n    let dataList = []\r\n\r\n    Object.keys(item).forEach(key => {\r\n        const id = item['_id']\r\n        let text = item[key]\r\n        if (\"_explanation\" === key || \"_id\"  === key || \"_index\" === key) {\r\n            return true;\r\n        }\r\n        \r\n        if (analyzerTokensMap[id] !== undefined) {\r\n            const analyzerFieldList = analyzerTokensMap[id]\r\n            const analyzerTokens = analyzerFieldList.find(obj => obj['field'] === key)\r\n            if (analyzerTokens !== undefined && analyzerTokens['tokens'] !== undefined && analyzerTokens['tokens'] !== null && analyzerTokens['tokens'].length > 0) {\r\n                dataList.push({\r\n                    field: key,\r\n                    text: text,\r\n                    tokens: analyzerTokens['tokens']\r\n                  })\r\n            } else {\r\n                dataList.push({\r\n                    field: key,\r\n                    text: text,\r\n                    tokens: []\r\n                })\r\n            }\r\n        } else {\r\n            dataList.push({\r\n                field: key,\r\n                text: text,\r\n                tokens: []\r\n            })\r\n        }\r\n    })\r\n\r\n    return (\r\n        <Table>\r\n            <TableBody>\r\n                {\r\n                    dataList.map((data, index) => {\r\n                        let tokenValue = (data['tokens']||[]).map(t => `\"${t}\"`).join(\", \");\r\n                        let text = JSON.stringify(data['text']);\r\n                        let field = data['field'];\r\n                        return (\r\n                            <TableRow key={\"data-\" + index}>\r\n                                <TableCell style={{fontWeight: \"bold\"}}>{field}</TableCell>\r\n                                <TableCell>{text}</TableCell>\r\n                                <TableCell>{tokenValue.length > 0 ? tokenValue : text}</TableCell>\r\n                            </TableRow>\r\n                        )\r\n                    })\r\n                }\r\n                <TableRow>\r\n                    <TableCell>점수</TableCell>\r\n                    <TableCell colSpan={2}>\r\n                         <ScoreTreeView description={item._explanation.description}\r\n                                        details={item._explanation.details}\r\n                                        expand={expand}\r\n                                        nodeToggle={nodeToggle}\r\n                         />\r\n                     </TableCell>\r\n                 </TableRow>\r\n            </TableBody>\r\n        </Table>\r\n    )\r\n}\r\n\r\nfunction RankingTuningResults({pageNum, result, expand, nodeToggle, errorMessage}) {\r\n    ids = 1;\r\n\r\n    if (errorMessage.length > 0) {\r\n        return (\r\n            <Table style={{ margin: \"9px\", overflow: \"scroll\" }}>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell align=\"center\"> 오류. </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    <TableRow>\r\n                        <TableCell>\r\n                            <pre>\r\n                                {errorMessage}\r\n                            </pre>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableBody>\r\n            </Table>\r\n        )\r\n    } else {\r\n        return (\r\n            <Table style={{ margin: \"9px\", overflow: \"scroll\" }}>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell align=\"right\"> # </TableCell>\r\n                        <TableCell align=\"center\"> 결과 문서 </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {result.SearchResponse.length !== 0 ?\r\n                        result.SearchResponse.map((item, index) => {\r\n                            let number = index + ((pageNum-1)*10) + 1;\r\n                            // return <></>;\r\n                            return (<TableRow key={\"a\" + number}>\r\n                                <TableCell style={{fontWeight: \"bold\"}} align=\"right\">{number}</TableCell>\r\n                                <TableCell >\r\n                                    <ResultDocument result={result} item={item} expand={expand} nodeToggle={nodeToggle}/>\r\n                                </TableCell>\r\n                            </TableRow>);\r\n                        })\r\n                        : <TableRow>\r\n                            <TableCell align=\"right\"></TableCell>\r\n                            <TableCell align=\"center\">\r\n                                <Typography>현재 검색된 결과가 없습니다.</Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    }\r\n                </TableBody>\r\n            </Table>\r\n        );\r\n    }\r\n}\r\nlet eventCode = null\r\nfunction RankingTuningCard({dispatch, result, index}) {\r\n    const classes = useStyles()\r\n    const aceEditor = useRef(\"\");\r\n    let inputIndex = useRef('');\r\n\r\n    const [pageNum, setPageNum] = useState(0);\r\n    const [progress, setProgress] = useState(false);\r\n    const [expand, setExpand] = useState([]);\r\n    const [checked, setChecked] = useState(false);\r\n    const [autoHeight, setAutoHeight] = useState('600px')\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n    const [query, setQuery] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        dispatch(resetDocumentList())\r\n        setQuery('')\r\n        setPageNum(0)\r\n        setErrorMessage('')\r\n        aceEditor.current.editor.setValue(DEFAULT_TEMPLATE)\r\n\r\n        if (eventCode !== null) {\r\n            clearInterval(eventCode)\r\n        }\r\n        eventCode = setInterval(() => {\r\n            let windowHeight = Math.ceil(window.innerHeight * 0.6)\r\n            if (windowHeight < 500) {\r\n                windowHeight = 500\r\n            } else if (windowHeight > 900) {\r\n                windowHeight = Math.ceil(window.innerHeight * 0.8)\r\n            }\r\n            setAutoHeight(windowHeight + \"px\")\r\n        }, 500)\r\n        return () => {\r\n            if (eventCode !== null) {\r\n                clearInterval(eventCode)\r\n            }\r\n        }\r\n    }, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\r\n    const handleChecked = (evnet) =>{\r\n        setChecked(!checked);\r\n    }\r\n\r\n    const handleExpandAll = (event) =>{\r\n        let changeExpand = [];\r\n        for (let i = 1; i <= ids; i++)\r\n            changeExpand.push(`node${i}`);\r\n        setExpand(changeExpand)\r\n    }\r\n\r\n    const handleFoldAll = (event) =>{\r\n        setExpand([])\r\n    }\r\n\r\n    function isJson(str) {\r\n        try {\r\n            let json = JSON.parse(str);\r\n            return (typeof json === 'object');\r\n        } catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    const handleSearchQuery = (event) =>{\r\n        // dispatch(resetDocumentList())\r\n        setPageNum(0)\r\n        setQuery('')\r\n        setErrorMessage('')\r\n\r\n        ids = 1;\r\n        if(!isJson(aceEditor.current.editor.getValue())){\r\n            setErrorMessage(\"올바른 JSON 형식이 아닙니다.\")\r\n            return;\r\n        }\r\n\r\n        /* 스크롤 top으로 위치 시키기 */\r\n        document.querySelector(\"#move\").scrollTo(0, 0);\r\n\r\n        setProgress(true);\r\n        let jsonData = JSON.parse(aceEditor.current.editor.getValue());\r\n        jsonData.explain = true;\r\n        jsonData.from = 0;\r\n        jsonData.size = 10;\r\n        let data = {};\r\n\r\n        if(checked){\r\n            data.isMultiple = true;\r\n            data.index = inputIndex.current.value.replace(/ /gi, \"\");\r\n            data.text = JSON.stringify(jsonData);\r\n        } else {\r\n            data.isMultiple = true;\r\n            data.index = index;\r\n            data.text = JSON.stringify(jsonData);\r\n        }\r\n\r\n        dispatch(setDocumentList(data)).then((result) => {\r\n            if( result.payload.Total.value > 0 ) setPageNum(1);\r\n            else setPageNum(0);\r\n            setProgress(false);\r\n            setQuery(aceEditor.current.editor.getValue())\r\n        }).catch((error)=>{\r\n            setQuery('')\r\n            dispatch(resetDocumentList())\r\n            setPageNum(0);\r\n            setProgress(false);\r\n            try {\r\n                setErrorMessage(error.response.data.message)\r\n            } catch (error1) {\r\n                setErrorMessage(error)\r\n            }\r\n        })\r\n    }\r\n\r\n    function nodeToggle(event, expanded) {\r\n        setExpand(expanded)\r\n    }\r\n\r\n    function handlePagination(pageNum) {\r\n        // dispatch(resetDocumentList())\r\n        setErrorMessage('')\r\n        ids = 1;\r\n        // if(!isJson(aceEditor.current.editor.getValue())){\r\n        //     setErrorMessage(\"올바른 JSON 형식이 아닙니다.\")\r\n        //     return;\r\n        // }\r\n        document.querySelector(\"#move\").scrollTo(0, 0);\r\n        setProgress(true);\r\n        // let jsonData = JSON.parse(aceEditor.current.editor.getValue());\r\n        let jsonData = Object.assign(JSON.parse(query),{\r\n            explain: true,\r\n            from: ((pageNum - 1) * 10),\r\n            size: 10\r\n        })\r\n        // jsonData.explain = true;\r\n        // jsonData.from = (pageNum - 1) * 10;\r\n        // jsonData.size = 10;\r\n\r\n        let data = {};\r\n        if(checked){\r\n            data.isMultiple = true;\r\n            data.index = inputIndex.current.value;\r\n        }else{\r\n            data.isMultiple = true;\r\n            data.index = index;\r\n        }\r\n        \r\n        data.text = JSON.stringify(jsonData);\r\n        dispatch(setDocumentList(data)).then(() => {\r\n            setProgress(false);\r\n        }).catch((error) => {\r\n            dispatch(resetDocumentList())\r\n            try {\r\n                setErrorMessage(error.response.data.message)\r\n            } catch (error1) {\r\n                setErrorMessage(error)\r\n            }\r\n        })\r\n        setPageNum(pageNum)\r\n    }\r\n\r\n    return (\r\n        <Card mb={6}>\r\n            <CardContent>\r\n\r\n                <Grid container>\r\n                    <Grid item xs={12} md={12} lg={5}>\r\n\r\n                        <Box display=\"flex\"  alignItems=\"center\"  justifyContent=\"space-between\" mx={3} mb={2}>\r\n                            {checked ? <TextField className={classes.formControl} inputRef={inputIndex} label=\"인덱스를 입력해주세요\"/> : <IndicesSelect />}\r\n                            <FormControlLabel\r\n                                style={{whiteSpace: \"nowrap\"}}\r\n                                control={\r\n                                    <Switch\r\n                                        checked={checked}\r\n                                        onChange={handleChecked}\r\n                                        color=\"primary\"\r\n                                        name=\"IndexModeSelector\"\r\n                                        inputProps={{ 'aria-label': 'primary checkbox' }}\r\n                                    />\r\n                                }\r\n                                label=\"직접 입력\"\r\n                            />\r\n                        </Box>\r\n\r\n                        <Box mx={3} style={{border: \"1px solid silver\"}}>\r\n                            <AceEditor\r\n                                ref={aceEditor}\r\n                                id=\"aceEditor\"\r\n                                mode=\"json\"\r\n                                theme=\"kuroir\"\r\n                                fontSize=\"15px\"\r\n                                height={autoHeight}\r\n                                width=\"100%\"\r\n                                placeholder=\"검색쿼리를 입력해주세요.\"\r\n                                setOptions={{ useWorker: false }}\r\n                            />\r\n                        </Box>\r\n\r\n                        <Box align=\"right\" mx={3} mt={3}>\r\n                            {progress? <CircularProgress /> : <Button fullWidth variant=\"outlined\" color=\"primary\" onClick={handleSearchQuery}>검색</Button>}\r\n                        </Box>\r\n\r\n                        {/*<Snackbar open={alert} autoHideDuration={5000} onClose={handleSnackBarClose}>*/}\r\n                        {/*    <MuiAlert elevation={6} variant=\"filled\" severity=\"error\">*/}\r\n                        {/*        올바른 형식의 JSON이 아닙니다.*/}\r\n                        {/*    </MuiAlert>*/}\r\n                        {/*</Snackbar>*/}\r\n                    </Grid>\r\n                    <Grid item xs={12} md={12} lg={7}>\r\n\r\n                        <Hidden lgUp>\r\n                            <Box mt={10}> </Box>\r\n                        </Hidden>\r\n\r\n                        <Box display=\"flex\" alignItems=\"center\"  justifyContent=\"space-between\" mx={3} style={{height: \"52px\"}}>\r\n                            <Typography variant=\"h6\">총 {result.Total.value ? result.Total.value : \"0\"}건의 검색결과</Typography>\r\n                            <Box display=\"flex\">\r\n                                <Box m={2}><Link href=\"#\" onClick={handleExpandAll} > + 점수 펼치기 </Link></Box>\r\n                                <Box m={2}><Link href=\"#\" onClick={handleFoldAll}> - 점수 접기 </Link></Box>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box style={{overflow: \"scroll\", height: autoHeight, border: \"1px solid silver\"}} mx={3} id=\"move\">\r\n                                <RankingTuningResults pageNum={pageNum} result={result} expand={expand} nodeToggle={nodeToggle} errorMessage={errorMessage}/>\r\n                        </Box>\r\n                        <Box align=\"center\" mx={3} mt={3}>\r\n                            <Button\r\n                                variant=\"outlined\"\r\n                                color=\"primary\"\r\n                                onClick={() => handlePagination(pageNum - 1)}\r\n                                disabled={pageNum === 0 || pageNum === 1 }\r\n                                > 이전 </Button>\r\n                            <Box component={\"span\"} m={3}>\r\n                                {pageNum} / {result.Total.value ? ( Math.ceil(Number(result.Total.value) / 10)) : \"0\" }\r\n                            </Box>\r\n                            <Button\r\n                                variant=\"outlined\"\r\n                                color=\"primary\"\r\n                                onClick={() => handlePagination(pageNum + 1)}\r\n                                disabled={pageNum === 0 ? true : Math.ceil(Number(result.Total.value) / 10) === pageNum ? true : false}\r\n                                > 다음 </Button>\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                {/*<Grid container>*/}\r\n                {/*    <Grid item xs={12}>*/}\r\n                {/*        <Grid container>*/}\r\n                {/*            <Grid item xs={12} md={12} lg={4}>*/}\r\n                {/*                <Box display=\"flex\"  alignItems=\"center\"  justifyContent=\"space-between\" mx={3} mb={2}>*/}\r\n                {/*                    {checked ? <TextField className={classes.formControl} inputRef={inputIndex} label=\"인덱스를 입력해주세요\"/> : <IndicesSelect />}*/}\r\n                {/*                    <FormControlLabel*/}\r\n                {/*                        style={{whiteSpace: \"nowrap\"}}*/}\r\n                {/*                        control={*/}\r\n                {/*                            <Switch*/}\r\n                {/*                                checked={checked}*/}\r\n                {/*                                onChange={handleChecked}*/}\r\n                {/*                                color=\"primary\"*/}\r\n                {/*                                name=\"IndexModeSelector\"*/}\r\n                {/*                                inputProps={{ 'aria-label': 'primary checkbox' }}*/}\r\n                {/*                            />*/}\r\n                {/*                        }*/}\r\n                {/*                        label=\"직접 입력\"*/}\r\n                {/*                    />*/}\r\n                {/*                </Box>*/}\r\n                {/*            </Grid>*/}\r\n                {/*            <Grid item xs={12} md={12} lg={8}>*/}\r\n                {/*            /!* justifyContent=\"space-between\" *!/*/}\r\n                {/*                <Box display=\"flex\" alignItems=\"center\"  justifyContent=\"space-between\" mx={3}>*/}\r\n                {/*                <Typography variant=\"h6\">총 {result.Total.value ? result.Total.value : \"0\"}건의 검색결과</Typography>*/}\r\n                {/*                <Box display=\"flex\">*/}\r\n                {/*                    <Box m={2}><Link href=\"#\" onClick={handleExpandAll} > + 점수 펼치기 </Link></Box>*/}\r\n                {/*                    <Box m={2}><Link href=\"#\" onClick={handleFoldAll}> - 점수 접기 </Link></Box>*/}\r\n                {/*                </Box>*/}\r\n                {/*                /!* <FormControlLabel */}\r\n                {/*                    control={<Checkbox checked={checked} onChange={handleExpandChange} name=\"selected\" />}*/}\r\n                {/*                    label=\"펼치기\"*/}\r\n                {/*                /> *!/*/}\r\n                {/*                </Box>*/}\r\n                {/*            </Grid>*/}\r\n                {/*        </Grid>*/}\r\n                {/*    </Grid>*/}\r\n\r\n                {/*    <Grid item xs={12}>*/}\r\n                {/*        <Grid container style={{height: autoHeight}}>*/}\r\n                {/*            <Grid item xs={12} md={12} lg={4}>*/}\r\n                {/*                <Box mx={3} style={{border: \"1px solid silver\"}}>*/}\r\n                {/*                    <AceEditor*/}\r\n                {/*                        ref={aceEditor}*/}\r\n                {/*                        id=\"aceEditor\"*/}\r\n                {/*                        mode=\"json\"*/}\r\n                {/*                        theme=\"kuroir\"*/}\r\n                {/*                        fontSize=\"15px\"*/}\r\n                {/*                        height={autoHeight}*/}\r\n                {/*                        width=\"100%\"*/}\r\n                {/*                        placeholder=\"검색쿼리를 입력해주세요.\"*/}\r\n                {/*                        setOptions={{ useWorker: false }}*/}\r\n                {/*                    />*/}\r\n                {/*                </Box>*/}\r\n                {/*            </Grid>*/}\r\n                {/*            <Grid item xs={12} md={12} lg={8}>*/}\r\n                {/*                <Box style={{overflow: \"scroll\", height: autoHeight, border: \"1px solid silver\"}} mx={3} id=\"move\">*/}\r\n                {/*                        <RankingTuningResults pageNum={pageNum} result={result} expand={expand} nodeToggle={nodeToggle}/>*/}\r\n                {/*                </Box>*/}\r\n                {/*            </Grid>*/}\r\n                {/*        </Grid>*/}\r\n                {/*    </Grid>*/}\r\n\r\n                {/*    <Grid item xs={12}>*/}\r\n                {/*        <Grid container>*/}\r\n                {/*            <Grid item xs={12} md={4}>*/}\r\n                {/*                <Box align=\"right\" mx={3} mt={3}>*/}\r\n                {/*                    {progress? <CircularProgress /> : <Button variant=\"outlined\" color=\"primary\" onClick={handleSearchQuery}>검색</Button>}*/}\r\n                {/*                </Box>*/}\r\n                {/*                <Snackbar open={alert} autoHideDuration={5000} onClose={handleSnackBarClose}>*/}\r\n                {/*                    <MuiAlert elevation={6} variant=\"filled\" severity=\"error\">*/}\r\n                {/*                        올바른 형식의 JSON이 아닙니다.*/}\r\n                {/*                    </MuiAlert>*/}\r\n                {/*                </Snackbar>*/}\r\n                {/*            </Grid>*/}\r\n\r\n                {/*            <Grid item xs={12} md={8}>*/}\r\n                {/*                <Box align=\"center\" mx={3} mt={3}>*/}\r\n                {/*                    <Button */}\r\n                {/*                        variant=\"outlined\" */}\r\n                {/*                        color=\"primary\"*/}\r\n                {/*                        onClick={() => handlePagination(pageNum - 1)}*/}\r\n                {/*                        disabled={pageNum === 0 || pageNum === 1 }*/}\r\n                {/*                        > 이전 </Button>*/}\r\n                {/*                    <Box component={\"span\"} m={3}>*/}\r\n                {/*                        {pageNum} / {result.Total.value ? ( Math.ceil(Number(result.Total.value) / 10)) : \"0\" }*/}\r\n                {/*                    </Box>*/}\r\n                {/*                    <Button */}\r\n                {/*                        variant=\"outlined\" */}\r\n                {/*                        color=\"primary\"*/}\r\n                {/*                        onClick={() => handlePagination(pageNum + 1)}*/}\r\n                {/*                        disabled={pageNum === 0 ? true : Math.ceil(Number(result.Total.value) / 10) === pageNum ? true : false}*/}\r\n                {/*                        > 다음 </Button>*/}\r\n                {/*                </Box>*/}\r\n                {/*            </Grid>*/}\r\n                {/*        </Grid>*/}\r\n                {/*    </Grid>*/}\r\n                {/*</Grid>*/}\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n\r\nfunction RankingTuning({ dispatch, result, index}) {\r\n\r\n    useEffect(() => {\r\n        return () => dispatch(resetDocumentList())\r\n    }, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Helmet title=\"랭킹튜닝\"/>\r\n            <Typography variant=\"h3\" gutterBottom display=\"inline\">\r\n                랭킹튜닝\r\n            </Typography>\r\n\r\n            <Divider my={6} />\r\n\r\n            <Grid container spacing={6}>\r\n                <Grid item xs={12}  >\r\n                    <RankingTuningCard dispatch={dispatch} result={result} index={index} />\r\n                </Grid>\r\n            </Grid>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default connect(store => ({\r\n    result: store.rankingTuningReducers.result,\r\n    index: store.indicesReducers.index\r\n}))(RankingTuning);\r\n","import Client from '~/Client'\r\nimport {\r\n    SET_INDEX,\r\n    SET_INDEX_ALIASES, SET_INDEX_DOCUMENT_SOURCE_RESPONSE,\r\n    SET_INDEX_DOCUMENTS,\r\n    SET_INDEX_INFO_LIST,\r\n    SET_INDEX_MAPPINGS,\r\n    SET_INDEX_SETTINGS,\r\n    SET_INDEX_STATE,\r\n    SET_INDICES\r\n} from \"../constants\";\r\n\r\n\r\nconst client = new Client()\r\n\r\n\r\nexport const setIndexAction = (index) => dispatch => dispatch({type: SET_INDEX, payload: index})\r\n\r\nexport const setIndicesAction = () => dispatch =>\r\n    client.call({\r\n        uri: `/elasticsearch/_cat/indices`,\r\n        params: {\r\n            format: \"json\",\r\n        }\r\n    })\r\n        .then(response => dispatch({type: SET_INDICES, payload: response.data}))\r\n        .catch(error => console.error(error))\r\n\r\n\r\nexport const setIndexInfoListAction = (index) => dispatch =>\r\n    client.call({\r\n        uri: `/elasticsearch/_cat/indices/${index}`,\r\n        params: {\r\n            format: \"json\",\r\n        }\r\n    })\r\n        .then(response => dispatch({type: SET_INDEX_INFO_LIST, payload: response.data}))\r\n        .catch(error => console.error(error))\r\n\r\n\r\nexport const setIndexAliasesAction = (index) => dispatch =>\r\n    client.call({\r\n        uri: `/elasticsearch/${index}/_alias`,\r\n        params: {\r\n            format: \"json\",\r\n        }\r\n    })\r\n        .then(response => dispatch({type: SET_INDEX_ALIASES, payload: (response.data[index] || {})['aliases']}))\r\n        .catch(error => console.error(error))\r\n\r\nexport const setIndexSettingsAction = (index) => dispatch =>\r\n    client.call({\r\n        uri: `/elasticsearch/${index}/_settings?include_defaults`,\r\n        params: {\r\n            format: \"json\",\r\n        }\r\n    })\r\n        .then(response => dispatch({type: SET_INDEX_SETTINGS, payload: response.data[index]||{}}))\r\n        .catch(error => console.error(error))\r\n\r\nexport const setIndexMappingsAction = (index) => dispatch =>\r\n    client.call({\r\n        uri: `/elasticsearch/${index}/_mappings`,\r\n        params: {\r\n            format: \"json\",\r\n        }\r\n    })\r\n        .then(response => dispatch({type: SET_INDEX_MAPPINGS, payload: ((response.data[index] || {})['mappings']||{}) }))\r\n        .catch(error => console.error(error))\r\n    // dispatch({type: SET_INDEX_MAPPINGS, payload: ((response.data[index] || {})['mappings']||{})['properties'] })\r\n\r\nexport const setIndexStateAction = (index) => dispatch =>\r\n    client.call({\r\n        uri: `/elasticsearch/${index}/_stats`,\r\n        params: {\r\n            format: \"json\",\r\n        }\r\n    })\r\n        .then(response => dispatch({type: SET_INDEX_STATE, payload: response.data }))\r\n        .catch(error => console.error(error))\r\n\r\nexport const editDynamicQueryAction = (index, query) => dispatch => client.call({\r\n    uri: `/elasticsearch/${index}/_settings`,\r\n    method: \"PUT\",\r\n    data: query\r\n})\r\n\r\n\r\nexport const setIndexDocumentsAction = ({index, pageNum, rowSize, id, analysis}) => dispatch => client.call({\r\n    uri: `/indices/${index}/_docs`,\r\n    params: {\r\n        index,\r\n        pageNum,\r\n        rowSize,\r\n        id,\r\n        analysis\r\n    }\r\n}).then(response => dispatch({\r\n    type: SET_INDEX_DOCUMENTS,\r\n    payload: response.data,\r\n})).catch(err => console.error(err))\r\n\r\n\r\nexport const setIndexDocumentSourceListAction = ({index, from, size, id, columns, keyword = null}) => dispatch => client.call({\r\n    uri: `/elasticsearch/${index}/_search`,\r\n    method: 'post',\r\n    data: id !== undefined && id !== null && id !== \"\" ?\r\n        { query: { match: { _id: id } }, from, size, sort: [{ _id: { order: \"desc\" } }] }\r\n        :\r\n        keyword !== undefined && keyword !== null && keyword !== \"\" ?\r\n            { query: {\r\n                    bool: {\r\n                        minimum_should_match: 1,\r\n                        should: [\r\n                            {\r\n                                multi_match: {\r\n                                    query: keyword,\r\n                                    fields: columns,\r\n                                    operator: \"or\",\r\n                                    boost: 1\r\n                                }\r\n                            },\r\n                            {\r\n                                match: {\r\n                                    _id: keyword\r\n                                }\r\n                            }\r\n                        ]\r\n                    }\r\n                },\r\n                from,\r\n                size,\r\n                sort: [\r\n                    {_score: {order: \"desc\"}}\r\n                    // , { \"_id\": { \"order\": \"desc\" } }\r\n                ]\r\n            }\r\n            :\r\n            { from, size, sort: [\r\n                { _score: { order: \"desc\" } },\r\n                // { _id: { order: \"desc\" } }\r\n                ]\r\n            }\r\n}).then(response => {\r\n    dispatch({ type: SET_INDEX_DOCUMENT_SOURCE_RESPONSE, payload: response.data })\r\n    return response.data;\r\n})\r\n\r\nexport const editIndexDocumentSourceAction = ({index, id, body}) => dispatch => client.call({\r\n    uri: `/elasticsearch/${index}/_doc/${id}`,\r\n    method: 'put',\r\n    data: body\r\n}).then(response => response.data)\r\n\r\nexport const addIndexDocumentSourceAction = ({index, body}) => dispatch => client.call({\r\n    uri: `/elasticsearch/${index}/_doc`,\r\n    method: 'post',\r\n    data: body\r\n}).then(response => response.data)\r\n\r\nexport const deleteIndexDocumentSourceAction = ({index, id}) => dispatch => client.call({\r\n    uri: `/elasticsearch/${index}/_doc/${id}`,\r\n    method: 'DELETE',\r\n}).then(response => response.data)\r\n\r\nexport const analyzerDocumentSourceAction = (index, analyzerDocument) => dispatch => client.call({\r\n    uri: `/indices/${index}/analyzer`,\r\n    method: \"post\",\r\n    data: analyzerDocument\r\n}).then(response => response.data)\r\n\r\n\r\nexport const setIndexManagedAction = (action, index) => dispatch => client.call({\r\n    uri: `/elasticsearch/${index}/${action}`,\r\n    method: \"post\"\r\n}).then(response => response.data)\r\n\r\nexport const deleteIndexAction = index => dispatch => client.call({\r\n    uri: `/elasticsearch/${index}`,\r\n    method: \"delete\"\r\n}).then(response => response.data)","import React, { useEffect } from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {Box, FormControl, InputLabel, MenuItem, Select} from \"@material-ui/core\";\r\nimport {setIndexAction, setIndicesAction} from \"../../redux/actions/indicesActions\";\r\nimport {makeStyles} from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formControl: {\r\n        minWidth: 100\r\n    }\r\n}));\r\n\r\nfunction IndicesSelect({dispatch, indices, index, enableSystem=true, onSelected}) {\r\n    const classes = useStyles()\r\n    const handleChange = (event) => {\r\n        if (onSelected) {\r\n            onSelected(event.target.value)\r\n        }\r\n        dispatch(setIndexAction(event.target.value))\r\n    };\r\n\r\n    useEffect(() => {\r\n        dispatch(setIndicesAction())\r\n    }, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Box>\r\n                <FormControl className={classes.formControl}>\r\n                    <InputLabel id=\"demo-simple-select-label\">인덱스</InputLabel>\r\n                    <Select\r\n                        labelId=\"demo-simple-select-label\"\r\n                        id=\"demo-simple-select\"\r\n                        value={index}\r\n                        onChange={handleChange}\r\n                    >\r\n                        {\r\n                            indices.filter(index => !enableSystem ? !index['index'].startsWith(\".\") : true ).map(index => index['index']).sort()\r\n                                .map((index, i) => (<MenuItem key={i} value={index}>{index}</MenuItem>))\r\n                            // indices.filter(index => !enableSystem ? !index['index'].startsWith(\".\") : true )\r\n                            //     .map((index, i) => (<MenuItem key={i} value={index['index']}>{index['index']}</MenuItem>))\r\n                        }\r\n                    </Select>\r\n                </FormControl>\r\n\r\n                {/*<Checkbox*/}\r\n                {/*    defaultChecked*/}\r\n                {/*    color=\"default\"*/}\r\n                {/*    inputProps={{ 'aria-label': 'checkbox with default color' }}*/}\r\n                {/*/>*/}\r\n            </Box>\r\n            <br/>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default connect(store => ({\r\n    ...store.indicesReducers,\r\n}))(IndicesSelect);\r\n"],"sourceRoot":""}