(this["webpackJsonpdsearch-console"]=this["webpackJsonpdsearch-console"]||[]).push([[73],{995:function(e,t,n){"use strict";n.r(t);var a=n(62),r=n(0),c=n.n(r),l=n(786),i=n(857),o=n(734),u=n(1031),s=n(615),f=n(2),d=n(39),m=n(685),h=n(686),b=n(178),j=n(617),O=n(866),E=n.n(O),p=n(959),g=n.n(p),y=n(969),v=n.n(y),w=n(960),k=n.n(w),_=n(968),x=n.n(_),S=n(792),R=n.n(S),z=n(961),C=n.n(z),I=n(962),N=n.n(I),M=n(963),D=n.n(M),P=n(965),F=n.n(P),T=n(966),A=n.n(T),W=n(967),K=n.n(W),U=n(970),B=n.n(U),J=n(964),V=n.n(J),H=n(788),L=n.n(H),q=n(971),G=n.n(q),Q=n(736),X=n(713),Y=n.n(X),Z=n(695),$=Object(Z.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),ee={Add:Object(r.forwardRef)((function(e,t){return c.a.createElement(g.a,Object.assign({},e,{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return c.a.createElement(k.a,Object.assign({},e,{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return c.a.createElement(C.a,Object.assign({},e,{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return c.a.createElement(N.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return c.a.createElement(R.a,Object.assign({},e,{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return c.a.createElement(D.a,Object.assign({},e,{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return c.a.createElement(V.a,Object.assign({},e,{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return c.a.createElement(F.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(A.a,Object.assign({},e,{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(K.a,Object.assign({},e,{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(R.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(x.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return c.a.createElement(C.a,Object.assign({},e,{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return c.a.createElement(L.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return c.a.createElement(v.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return c.a.createElement(B.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return c.a.createElement(G.a,Object.assign({},e,{ref:t}))}))},te=null;var ne=Object(d.b)((function(e){return Object(f.a)(Object(f.a)({},e.indicesReducers),e.dsearchReducers)}))((function(e){var t=e.dispatch,n=e.index,l=e.authUser,i=e.mappings,o=($(),Object(d.d)((function(e){return Object(f.a)({},e.indicesReducers)})).documentSourceResponse),u=Object(r.useState)(""),O=Object(a.a)(u,2),p=O[0],g=O[1],y=Object(r.useState)(0),v=Object(a.a)(y,2),w=v[0],k=v[1],_=Object(r.useState)(5),x=Object(a.a)(_,2),S=x[0],R=x[1],z=Object(r.useState)([]),C=Object(a.a)(z,2),I=C[0],N=C[1],M=Object(r.useState)([]),D=Object(a.a)(M,2),P=D[0],F=D[1],T=Object(r.useState)(""),A=Object(a.a)(T,2),W=A[0],K=A[1],U=Object(r.useState)(!1),B=Object(a.a)(U,2),J=B[0],V=B[1],H=Object(r.useRef)(null);function L(e){var a=e.searchSize,r=void 0===a?100:a,c=e.columns,l=void 0===c?[]:c,i=e.keyword,o=void 0===i?null:i;return t(Object(Q.l)(n)).then((function(e){var a=e.payload;t(Object(Q.i)({index:n,from:w,size:r||S,columns:l,keyword:o})).then((function(e){var t={ID:null};return t=Object.assign(t,a.properties),(e.hits||{}).hits.forEach((function(e){var n=Y()(e._source);Object.keys(n).forEach((function(e){t[e]=null}))})),void 0!==o&&null!==o&&""!==o||N(Object.keys(t)),{columns:Object.keys(t),hits:e.hits}})).then((function(e){F(e?(e.hits||{}).hits.map((function(t){var n=Y()(t),a={};return e.columns.forEach((function(e){a[e.replace(/\./gi,"___")]=n["_source."+e]||""})),a.ID=t._id,a._hitsId=t._id,a})):[]),V(!1)}))}))}function q(e){R(e),L({keyword:p})}function G(e){F([]),null!==te&&clearTimeout(te),te=setTimeout((function(){V(!0),g(e);var t=Y()(i);L({columns:(/[^0-9]/gi.test(e)?I.filter((function(e){return["text","keyword"].includes(t["".concat(e,".type")])})):I).filter((function(e){return!t["".concat(e,".format")]})),keyword:e})}),500)}function Z(e,t){return"ID"===e?-1:"ID"===t||e.length>t.length?1:t.length>e.length?-1:0}return Object(r.useEffect)((function(){F([]),K(""),g(""),k(0),R(5),""!==n&&L({keyword:p})}),[n]),Object(r.useEffect)((function(){var e=o;if(!e||!e.hits)return!1;var t={ID:null};e.hits.hits.forEach((function(e){var n=Y()(e._source);Object.keys(n).forEach((function(e){t[e]=null}))}));var n=Object.keys(t);N(n),F(e.hits.hits.map((function(e){var t=Y()(e),a={};return n.forEach((function(e){a[e.replace(/\./gi,"___")]=t["_source."+e]||""})),a.ID=e._id,a._hitsId=e._id,a})))}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(s.a,{style:{width:"100%",height:"0px",display:J?"block":"none"}},c.a.createElement(s.a,{style:{zIndex:"1201",width:"100%",top:"120px",height:(((H||{}).current||{}).offsetHeight||478)-175+"px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#4646465c",opacity:.5,position:"relative"}},c.a.createElement(j.a,{color:"primary",style:{zIndex:"1202"}}))),c.a.createElement(s.a,{ref:H},l.role.index?c.a.createElement(E.a,{icons:ee,title:"",localization:{body:{emptyDataSourceMessage:""}},columns:I.sort((function(e,t){return Z(e,t)})).map((function(e){return{title:e,field:e.replace(/\./gi,"___"),editable:"ID"===e?"never":"always",cellStyle:{whiteSpace:"nowrap",maxWidth:"180px",overflow:"hidden"}}})),data:P.map((function(e){var t={};return Object.keys(e).forEach((function(n){"object"!==typeof e[n]&&(t[n]=e[n])})),t})),onChangeRowsPerPage:q,editable:{onRowAdd:function(e){return new Promise((function(a,r){var c=Object(X.unflatten)(e),l={};Object.keys(c).forEach((function(e){return l[e.replace(/___/gi,".")]=c[e]})),delete l.ID,t(Object(Q.a)({index:n,body:l})).then((function(){return setTimeout((function(){V(!0),L({keyword:p}).then(a)}),1e3)})).catch(r)}))},onRowUpdate:function(e,a){return new Promise((function(a,r){var c=Object(X.unflatten)(e),l={};Object.keys(c).forEach((function(e){return l[e.replace(/___/gi,".")]=c[e]}));var i=l._hitsId;delete l._hitsId,delete l.ID,delete l._id,t(Object(Q.f)({index:n,id:i,body:l})).then((function(){return setTimeout((function(){V(!0),L({keyword:p}).then(a)}),1e3)})).catch(r)}))},onRowDelete:function(e){return new Promise((function(a,r){var c=Object(X.unflatten)(e)._hitsId;t(Object(Q.d)({index:n,id:c})).then((function(){return setTimeout((function(){V(!0),L({keyword:p}).then(a)}),1e3)})).catch(r)}))}},onSearchChange:G,options:{headerStyle:{maxWidth:"180px"}},onRowClick:function(e,t){K(e.target.innerText||"")}}):c.a.createElement(E.a,{icons:ee,title:"",localization:{body:{emptyDataSourceMessage:""}},columns:I.sort((function(e,t){return Z(e,t)})).map((function(e){return{title:e,field:e.replace(/\./gi,"___"),editable:"ID"===e?"never":"always",cellStyle:{whiteSpace:"nowrap",maxWidth:"180px"}}})),data:P,onChangeRowsPerPage:q,onSearchChange:G,options:{headerStyle:{maxWidth:"180px"}},onRowClick:function(e,t){K(e.target.innerText||"")}})),c.a.createElement(m.a,{style:{display:""===W?"none":"block"}},c.a.createElement(h.a,null,c.a.createElement(s.a,{mt:5},c.a.createElement(b.a,{variant:"h5",gutterBottom:!0},W)))))})),ae=n(664),re=n(662),ce=n(620),le=n(624),ie=n(879),oe=n(621),ue=n(750),se=n(693),fe=n(687),de=n(692),me=n(691),he=n(694),be=n(651),je=Object(Z.a)((function(e){return{}})),Oe=[5,10,20];var Ee=Object(d.b)((function(e){return Object(f.a)({},e.indicesReducers)}))((function(e){var t=e.dispatch,n=e.index,i=e.mappings,o=je(),u=Object(r.useState)(""),d=Object(a.a)(u,2),b=d[0],O=d[1],E=Object(r.useState)(""),p=Object(a.a)(E,2),g=p[0],y=p[1],v=Object(r.useState)([]),w=Object(a.a)(v,2),k=w[0],_=w[1],x=Object(r.useState)(0),S=Object(a.a)(x,2),R=S[0],z=S[1],C=Object(r.useState)(5),I=Object(a.a)(C,2),N=I[0],M=I[1],D=Object(r.useState)([]),P=Object(a.a)(D,2),F=P[0],T=P[1],A=Object(r.useState)(0),W=Object(a.a)(A,2),K=W[0],U=W[1],B=Object(r.useState)(!1),J=Object(a.a)(B,2),V=J[0],H=J[1];function L(e){var a=e.searchFrom,r=e.searchSize,c=e.searchKeyword;T([]),H(!0),t(Object(Q.l)(n)).then((function(e){var t=((e||{}).payload||{}).properties||{},n={};return Object.keys(Y()(t)).forEach((function(e){n[e.replace(/.properties/gi,"")]=Y()(t)[e]})),{mappings:t,flatMappings:n}})).then((function(e){var l=[],o=Y()(i);return l=(l=/[^0-9]/gi.test(c)?k.filter((function(e){return["text","keyword"].includes(o["".concat(e,".type")])})):k).filter((function(e){return!o["".concat(e,".format")]})),t(Object(Q.i)({index:n,from:a||R,size:r||N,keyword:void 0===c?b:c,columns:l})).then((function(t){return Object(f.a)(Object(f.a)({},e),{},{documents:t})}))})).then((function(e){var t=(((e||{}).documents||{}).hits||{}).hits||[];if(void 0===c||""===c){var n={};t.forEach((function(e){var t=Y()(e._source);Object.keys(t).forEach((function(e){n[e]=null}))})),_(Object.keys(n))}var a={};return t.forEach((function(t){var n=t._id,r=Y()(t._source);a[n]=[],Object.keys(r).forEach((function(c){var l="";"text"===((e||{}).flatMappings||{})[c+".type"]&&(l="standard"),((e||{}).flatMappings||{})[c+".analyzer"]&&(l=(e||{}).flatMappings[c+".analyzer"]),l&&""!==l&&a[n].push({field:c,text:r[c],analyzer:l});var i={};Object.keys((e||{}).flatMappings||{}).filter((function(e){return e.includes("".concat(c,".fields"))})).forEach((function(t){t.endsWith(".analyzer")?(delete i["".concat(t.substring(0,t.length-9),".type")],i[t]={field:t.substring(0,t.length-9).replaceAll(".fields",""),text:r[c],analyzer:((e||{}).flatMappings||{})[t]||"standard"}):t.endsWith(".type")&&!i["".concat(t.substring(0,t.length-5),".analyzer")]&&(i[t]={field:t.substring(0,t.length-5).replaceAll(".fields",""),text:r[c],analyzer:"standard"})})),Object.values(i).forEach((function(e){t._source[e.field]=r[c],a[n].push(e)}))}))})),Object(f.a)(Object(f.a)({},e||{}),{},{totalSize:((((e||{}).documents||{}).hits||{}).total||{}).value||0,documentAnalyzerMap:a})})).then((function(e){t(Object(Q.b)(n,(e||{}).documentAnalyzerMap||{})).then((function(t){var n=[];((((e||{}).documents||{}).hits||{}).hits||[]).forEach((function(e){var a=Y()(e._source);n.push({key:"* ID",value:e._id,term:"-"}),Object.keys(a).forEach((function(r){var c="";if(t[e._id]&&t[e._id].length>0){var l=t[e._id].find((function(e){return e.field===r}));l&&l.term&&l.term.length>0&&(c=l.term.join(", "))}n.push({key:r,value:a[r],term:c})}))})),H(!1),T(n),U(e.totalSize)}))})).catch((function(e){H(!1),console.log("error",e)}))}function q(e){z(e),L({searchFrom:e})}function G(e){O(e),z(0),L({searchFrom:0,searchKeyword:e})}return Object(r.useEffect)((function(){O(""),_([]),z(0),L({searchKeyword:"",searchFrom:0})}),[n]),n?c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement(m.a,null,c.a.createElement(h.a,null,c.a.createElement(ae.a,{container:!0},c.a.createElement(ae.a,{item:!0,xs:4},c.a.createElement(s.a,{className:o.form},c.a.createElement(re.a,{className:o.input,placeholder:"Search",value:g,onChange:function(e){return y(e.target.value)},onKeyUp:function(e){13===e.keyCode&&G(g)}}),c.a.createElement(ce.a,{className:o.iconButton,onClick:function(){return G(g)}},c.a.createElement(be.a,null)))),c.a.createElement(ae.a,{item:!0,xs:4},c.a.createElement(s.a,{align:"center"},c.a.createElement(le.a,{variant:"outlined",onClick:function(){return q(R-N)},disabled:R<=0},"\uc774\uc804"),c.a.createElement(s.a,{component:"span",m:3},F.length>0?isNaN(R/N+1)?0:R/N+1:0,"/",isNaN(Math.ceil(K/N))?0:Math.ceil(K/N)),c.a.createElement(le.a,{variant:"outlined",onClick:function(){return q(R+N)},disabled:(isNaN(R/N+1)?0:R/N+1)>=(isNaN(Math.ceil(K/N))?0:Math.ceil(K/N))},"\ub2e4\uc74c"))),c.a.createElement(ae.a,{item:!0,xs:4},c.a.createElement(s.a,{align:"right"},c.a.createElement(l.a,{className:o.formControl},c.a.createElement(ie.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:N,onChange:function(e){M(e.target.value),L({searchFrom:0,searchSize:e.target.value})}},Oe.map((function(e){return c.a.createElement(oe.a,{key:e,value:e},e)}))))))),c.a.createElement(ue.a,null,c.a.createElement(se.a,{size:"small"},c.a.createElement("colgroup",null,c.a.createElement("col",{style:{width:"20%"}}),c.a.createElement("col",{style:{width:"40%"}}),c.a.createElement("col",{style:{width:"40%"}})),c.a.createElement(fe.a,null,c.a.createElement(de.a,null,c.a.createElement(me.a,null,"\uc544\uc774\ub514"),c.a.createElement(me.a,null,"\uac12"),c.a.createElement(me.a,null,"\ubd84\uc11d\uacb0\uacfc"))),c.a.createElement(he.a,{style:{display:V?"table-row-group":"none"}},c.a.createElement(de.a,null,c.a.createElement(me.a,{colSpan:3},c.a.createElement(s.a,{align:"center"},c.a.createElement(j.a,null))))),c.a.createElement(he.a,{style:{display:V?"none":"table-row-group"}},F.map((function(e,t){try{return c.a.createElement(de.a,{key:"".concat(e.key,"-").concat(t)},c.a.createElement(me.a,null,e.key),c.a.createElement(me.a,null,e.value),c.a.createElement(me.a,null,e.term))}catch(n){return console.error(n),!1}}))))),c.a.createElement("br",null),c.a.createElement(ae.a,{container:!0},c.a.createElement(ae.a,{item:!0,xs:12},c.a.createElement(s.a,{align:"center"},c.a.createElement(le.a,{variant:"outlined",onClick:function(){return q(R-N)},disabled:R<=0},"\uc774\uc804"),c.a.createElement(s.a,{component:"span",m:3},F.length>0?isNaN(R/N+1)?0:R/N+1:0,"/",isNaN(Math.ceil(K/N))?0:Math.ceil(K/N)),c.a.createElement(le.a,{variant:"outlined",onClick:function(){return q(R+N)},disabled:(isNaN(R/N+1)?0:R/N+1)>=(isNaN(Math.ceil(K/N))?0:Math.ceil(K/N))},"\ub2e4\uc74c"))))))):null}));t.default=function(){var e=Object(r.useState)("source"),t=Object(a.a)(e,2),n=t[0],f=t[1];function d(e){f(e.target.value)}return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a,{component:"fieldset"},c.a.createElement(i.a,{row:!0,"aria-label":"position",name:"position",defaultValue:"top"},c.a.createElement(o.a,{value:"source",checked:"source"===n,onChange:d,control:c.a.createElement(u.a,{color:"primary"}),label:"\uae30\ubcf8"}),c.a.createElement(o.a,{value:"indexed",checked:"indexed"===n,onChange:d,control:c.a.createElement(u.a,{color:"primary"}),label:"\ubd84\uc11d\ub41c \uc0c9\uc778\uc5b4"}))),c.a.createElement(s.a,{mt:2},"source"===n?c.a.createElement(ne,null):c.a.createElement(Ee,null)))}}}]);
//# sourceMappingURL=73.daf2b9e8.chunk.js.map